Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id F3CCE2F57CD
	for <lists+linux-kernel@lfdr.de>; Thu, 14 Jan 2021 04:01:00 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728692AbhANCHT (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Wed, 13 Jan 2021 21:07:19 -0500
Received: from relmlor1.renesas.com ([210.160.252.171]:4240 "EHLO
        relmlie5.idc.renesas.com" rhost-flags-OK-OK-OK-FAIL)
        by vger.kernel.org with ESMTP id S1729776AbhANCHJ (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Wed, 13 Jan 2021 21:07:09 -0500
Date:   14 Jan 2021 11:06:17 +0900
X-IronPort-AV: E=Sophos;i="5.79,345,1602514800"; 
   d="scan'208";a="68941282"
Received: from unknown (HELO relmlir5.idc.renesas.com) ([10.200.68.151])
  by relmlie5.idc.renesas.com with ESMTP; 14 Jan 2021 11:06:17 +0900
Received: from mercury.renesas.com (unknown [10.166.252.133])
        by relmlir5.idc.renesas.com (Postfix) with ESMTP id 82B884011439;
        Thu, 14 Jan 2021 11:06:17 +0900 (JST)
Message-ID: <87czy8p9cg.wl-kuninori.morimoto.gx@renesas.com>
From:   Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
To:     Rob Herring <robh+dt@kernel.org>
Cc:     Frank Rowand <frowand.list@gmail.com>, devicetree@vger.kernel.org,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH] of: property: add port base loop
In-Reply-To: <CAL_JsqLEDd57L9edqtHQGf92oJZ02w-C8kZ064ijdcWbohwOhA@mail.gmail.com>
References: <87pn29pc5w.wl-kuninori.morimoto.gx@renesas.com>
        <CAL_JsqLEDd57L9edqtHQGf92oJZ02w-C8kZ064ijdcWbohwOhA@mail.gmail.com>
User-Agent: Wanderlust/2.15.9 Emacs/26.3 Mule/6.0
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org


Hi Rob

Thank you for your feedback

> > In such case, people want to have port base loop
> > instead of endpoints base loop.
> > This patch adds such functions/macros.
> 
> I'm a bit hesitant on these too. A driver should generally know what
> each port # is (since the binding has to define them), and it should
> just request the port (or its connection) it wants. At least that was
> the premise behind of_graph_get_remote_node() and the cleanups (mostly
> DRM drivers) I did to use it. I'd rather see things move in that
> direction.

I'm working for ALSA SoC now.
To use ALSA SoC sound, it needs at least 3 drivers.
The purpose of "Card" here is for glueing SoC and Codec.

	SoC <-> Card <-> Codec

If board/platform needs special handling,
user needs to create specific Card driver.
In such case, it needs to know detail of each ports.

But many cases, we want to use generic Card driver.
Because it is generic, it don't know how many ports are used,
and endpoint base loop is not enough for it.
This is my motivation for this patch.

> In any case, this needs a user before merging.

OK.
I will repost it again as part of above patch-set.

Thank you for your help !!

Best regards
---
Kuninori Morimoto
