Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 1CE6222A505
	for <lists+linux-kernel@lfdr.de>; Thu, 23 Jul 2020 04:05:30 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S2387747AbgGWCFA (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Wed, 22 Jul 2020 22:05:00 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:55301 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S2387719AbgGWCE5 (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Wed, 22 Jul 2020 22:04:57 -0400
X-UUID: 9fe3f78242694bc08b9c4d08e26b91a1-20200723
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=Pq8ryqqd1XId2hCe/DQWnyfH74kyeJyUn6djhAqMZkE=;
        b=Rpnv7C1qUA0sc8W5vckBm0I0dtfYW/sVyX25DP3jKiT9jwtGD8Dbs+AcBj4ulNGYX1YHVuHlD1xoz6bMilT5pc9hnpKVvzKxcVtEmUb95d94rqc+2/PAKazaW+YS+AUc99BfZGngyJUryS+oCjdG+bqRgk/HJQTwAE7GgN4ABqo=;
X-UUID: 9fe3f78242694bc08b9c4d08e26b91a1-20200723
Received: from mtkexhb01.mediatek.inc [(172.21.101.102)] by mailgw01.mediatek.com
        (envelope-from <yongqiang.niu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 356140134; Thu, 23 Jul 2020 10:04:51 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 mtkmbs05n1.mediatek.inc (172.21.101.15) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Thu, 23 Jul 2020 10:04:49 +0800
Received: from localhost.localdomain (10.17.3.153) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Thu, 23 Jul 2020 10:04:39 +0800
From:   Yongqiang Niu <yongqiang.niu@mediatek.com>
To:     CK Hu <ck.hu@mediatek.com>, Philipp Zabel <p.zabel@pengutronix.de>,
        Rob Herring <robh+dt@kernel.org>,
        Matthias Brugger <matthias.bgg@gmail.com>
CC:     David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
        Mark Rutland <mark.rutland@arm.com>,
        <dri-devel@lists.freedesktop.org>, <devicetree@vger.kernel.org>,
        <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        Yongqiang Niu <yongqiang.niu@mediatek.com>
Subject: [v7, PATCH 3/7] mtk-mmsys: add mt8183 mmsys support
Date:   Thu, 23 Jul 2020 10:03:14 +0800
Message-ID: <1595469798-3824-4-git-send-email-yongqiang.niu@mediatek.com>
X-Mailer: git-send-email 1.8.1.1.dirty
In-Reply-To: <1595469798-3824-1-git-send-email-yongqiang.niu@mediatek.com>
References: <1595469798-3824-1-git-send-email-yongqiang.niu@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

YWRkIG10ODE4MyBtbXN5cyBzdXBwb3J0DQoNCkZlYXR1cmU6IGRybS9tZWRpYXRlaw0KU2lnbmVk
LW9mZi1ieTogWW9uZ3FpYW5nIE5pdSA8eW9uZ3FpYW5nLm5pdUBtZWRpYXRlay5jb20+DQotLS0N
CiBkcml2ZXJzL3NvYy9tZWRpYXRlay9tbXN5cy9NYWtlZmlsZSAgICAgICB8ICAgMSArDQogZHJp
dmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMvbXQ4MTgzLW1tc3lzLmMgfCAxNjEgKysrKysrKysrKysr
KysrKysrKysrKysrKysrKysrDQogZHJpdmVycy9zb2MvbWVkaWF0ZWsvbXRrLW1tc3lzLmMgICAg
ICAgICAgfCAgIDEgKw0KIDMgZmlsZXMgY2hhbmdlZCwgMTYzIGluc2VydGlvbnMoKykNCiBjcmVh
dGUgbW9kZSAxMDA2NDQgZHJpdmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMvbXQ4MTgzLW1tc3lzLmMN
Cg0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvc29jL21lZGlhdGVrL21tc3lzL01ha2VmaWxlIGIvZHJp
dmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMvTWFrZWZpbGUNCmluZGV4IDMzYjBkYWIuLjYyY2ZlZGYg
MTAwNjQ0DQotLS0gYS9kcml2ZXJzL3NvYy9tZWRpYXRlay9tbXN5cy9NYWtlZmlsZQ0KKysrIGIv
ZHJpdmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMvTWFrZWZpbGUNCkBAIC0xLDIgKzEsMyBAQA0KICMg
U1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0yLjAtb25seQ0KIG9iai15ICs9IG10MjcwMS1t
bXN5cy5vDQorb2JqLXkgKz0gbXQ4MTgzLW1tc3lzLm8NCmRpZmYgLS1naXQgYS9kcml2ZXJzL3Nv
Yy9tZWRpYXRlay9tbXN5cy9tdDgxODMtbW1zeXMuYyBiL2RyaXZlcnMvc29jL21lZGlhdGVrL21t
c3lzL210ODE4My1tbXN5cy5jDQpuZXcgZmlsZSBtb2RlIDEwMDY0NA0KaW5kZXggMDAwMDAwMC4u
OWQ1ZjI3Ng0KLS0tIC9kZXYvbnVsbA0KKysrIGIvZHJpdmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMv
bXQ4MTgzLW1tc3lzLmMNCkBAIC0wLDAgKzEsMTYxIEBADQorLy8gU1BEWC1MaWNlbnNlLUlkZW50
aWZpZXI6IEdQTC0yLjANCisvLw0KKy8vIENvcHlyaWdodCAoYykgMjAyMCBNZWRpYVRlayBJbmMu
DQorDQorI2luY2x1ZGUgPGxpbnV4L2RldmljZS5oPg0KKyNpbmNsdWRlIDxsaW51eC9pby5oPg0K
KyNpbmNsdWRlIDxsaW51eC9vZl9kZXZpY2UuaD4NCisjaW5jbHVkZSA8bGludXgvcGxhdGZvcm1f
ZGV2aWNlLmg+DQorI2luY2x1ZGUgPGxpbnV4L3NvYy9tZWRpYXRlay9tdGstbW1zeXMuaD4NCisN
CisjZGVmaW5lIERJU1BfT1ZMMF9NT1VUX0VOCQkweGYwMA0KKyNkZWZpbmUgRElTUF9PVkwwXzJM
X01PVVRfRU4JCTB4ZjA0DQorI2RlZmluZSBESVNQX09WTDFfMkxfTU9VVF9FTgkJMHhmMDgNCisj
ZGVmaW5lIERJU1BfRElUSEVSMF9NT1VUX0VOCQkweGYwYw0KKyNkZWZpbmUgRElTUF9QQVRIMF9T
RUxfSU4JCTB4ZjI0DQorI2RlZmluZSBESVNQX0RTSTBfU0VMX0lOCQkweGYyYw0KKyNkZWZpbmUg
RElTUF9EUEkwX1NFTF9JTgkJMHhmMzANCisjZGVmaW5lIERJU1BfUkRNQTBfU09VVF9TRUxfSU4J
CTB4ZjUwDQorI2RlZmluZSBESVNQX1JETUExX1NPVVRfU0VMX0lOCQkweGY1NA0KKw0KKyNkZWZp
bmUgT1ZMMF9NT1VUX0VOX09WTDBfMkwJCQlCSVQoNCkNCisjZGVmaW5lIE9WTDBfMkxfTU9VVF9F
Tl9ESVNQX1BBVEgwCQlCSVQoMCkNCisjZGVmaW5lIE9WTDFfMkxfTU9VVF9FTl9SRE1BMQkJCUJJ
VCg0KQ0KKyNkZWZpbmUgRElUSEVSMF9NT1VUX0lOX0RTSTAJCQlCSVQoMCkNCisjZGVmaW5lIERJ
U1BfUEFUSDBfU0VMX0lOX09WTDBfMkwJCTB4MQ0KKyNkZWZpbmUgRFNJMF9TRUxfSU5fUkRNQTAJ
CQkweDENCisjZGVmaW5lIERTSTBfU0VMX0lOX1JETUExCQkJMHgzDQorI2RlZmluZSBEUEkwX1NF
TF9JTl9SRE1BMAkJCTB4MQ0KKyNkZWZpbmUgRFBJMF9TRUxfSU5fUkRNQTEJCQkweDINCisjZGVm
aW5lIFJETUEwX1NPVVRfQ09MT1IwCQkJMHgxDQorI2RlZmluZSBSRE1BMV9TT1VUX0RTSTAJCQkJ
MHgxDQorDQorc3RydWN0IG1tc3lzX3BhdGhfc2VsIHsNCisJZW51bSBtdGtfZGRwX2NvbXBfaWQg
Y3VyOw0KKwllbnVtIG10a19kZHBfY29tcF9pZCBuZXh0Ow0KKwl1MzIgYWRkcjsNCisJdTMyIHZh
bDsNCit9Ow0KKw0KK3N0YXRpYyBzdHJ1Y3QgbW1zeXNfcGF0aF9zZWwgbW1zeXNfbW91dF9lbltd
ID0gew0KKwl7DQorCQlERFBfQ09NUE9ORU5UX09WTDAsIEREUF9DT01QT05FTlRfT1ZMXzJMMCwN
CisJCURJU1BfT1ZMMF9NT1VUX0VOLCBPVkwwX01PVVRfRU5fT1ZMMF8yTCwNCisJfSwNCisJew0K
KwkJRERQX0NPTVBPTkVOVF9PVkxfMkwwLCBERFBfQ09NUE9ORU5UX1JETUEwLA0KKwkJRElTUF9P
VkwwXzJMX01PVVRfRU4sIE9WTDBfMkxfTU9VVF9FTl9ESVNQX1BBVEgwLA0KKwl9LA0KKwl7DQor
CQlERFBfQ09NUE9ORU5UX09WTF8yTDEsIEREUF9DT01QT05FTlRfUkRNQTEsDQorCQlESVNQX09W
TDFfMkxfTU9VVF9FTiwgT1ZMMV8yTF9NT1VUX0VOX1JETUExLA0KKwl9LA0KKwl7DQorCQlERFBf
Q09NUE9ORU5UX0RJVEhFUiwgRERQX0NPTVBPTkVOVF9EU0kwLA0KKwkJRElTUF9ESVRIRVIwX01P
VVRfRU4sIERJVEhFUjBfTU9VVF9JTl9EU0kwLA0KKwl9LA0KK307DQorDQorc3RhdGljIHN0cnVj
dCBtbXN5c19wYXRoX3NlbCBtbXN5c19zZWxfaW5bXSA9IHsNCisJew0KKwkJRERQX0NPTVBPTkVO
VF9PVkxfMkwwLCBERFBfQ09NUE9ORU5UX1JETUEwLA0KKwkJRElTUF9QQVRIMF9TRUxfSU4sIERJ
U1BfUEFUSDBfU0VMX0lOX09WTDBfMkwsDQorCX0sDQorCXsNCisJCUREUF9DT01QT05FTlRfUkRN
QTEsIEREUF9DT01QT05FTlRfRFBJMCwNCisJCURJU1BfRFBJMF9TRUxfSU4sIERQSTBfU0VMX0lO
X1JETUExLA0KKwl9LA0KK307DQorDQorc3RhdGljIHN0cnVjdCBtbXN5c19wYXRoX3NlbCBtbXN5
c19zb3V0X3NlbFtdID0gew0KKwl7DQorCQlERFBfQ09NUE9ORU5UX1JETUEwLCBERFBfQ09NUE9O
RU5UX0NPTE9SMCwNCisJCURJU1BfUkRNQTBfU09VVF9TRUxfSU4sIFJETUEwX1NPVVRfQ09MT1Iw
LA0KKwl9LA0KK307DQorDQorc3RhdGljIHVuc2lnbmVkIGludCBtdGtfbW1zeXNfZGRwX21vdXRf
ZW4oZW51bSBtdGtfZGRwX2NvbXBfaWQgY3VyLA0KKwkJCQkJICBlbnVtIG10a19kZHBfY29tcF9p
ZCBuZXh0LA0KKwkJCQkJICB1bnNpZ25lZCBpbnQgKmFkZHIpDQorew0KKwl1MzIgaTsNCisJdTMy
IHZhbCA9IDA7DQorCXN0cnVjdCBtbXN5c19wYXRoX3NlbCAqcGF0aDsNCisNCisJZm9yIChpID0g
MDsgaSA8IEFSUkFZX1NJWkUobW1zeXNfbW91dF9lbik7IGkrKykgew0KKwkJcGF0aCA9ICZtbXN5
c19tb3V0X2VuW2ldOw0KKwkJaWYgKGN1ciA9PSBwYXRoLT5jdXIgJiYgbmV4dCA9PSBwYXRoLT5u
ZXh0KSB7DQorCQkJKmFkZHIgPSBwYXRoLT5hZGRyOw0KKwkJCXZhbCA9IHBhdGgtPnZhbDsNCisJ
CQlicmVhazsNCisJCX0NCisJfQ0KKw0KKwlyZXR1cm4gdmFsOw0KK30NCisNCitzdGF0aWMgdW5z
aWduZWQgaW50IG10a19tbXN5c19kZHBfc2VsX2luKGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwN
CisJCQkJCSBlbnVtIG10a19kZHBfY29tcF9pZCBuZXh0LA0KKwkJCQkJIHVuc2lnbmVkIGludCAq
YWRkcikNCit7DQorCXUzMiBpOw0KKwl1MzIgdmFsID0gMDsNCisJc3RydWN0IG1tc3lzX3BhdGhf
c2VsICpwYXRoOw0KKw0KKwlmb3IgKGkgPSAwOyBpIDwgQVJSQVlfU0laRShtbXN5c19zZWxfaW4p
OyBpKyspIHsNCisJCXBhdGggPSAmbW1zeXNfc2VsX2luW2ldOw0KKwkJaWYgKGN1ciA9PSBwYXRo
LT5jdXIgJiYgbmV4dCA9PSBwYXRoLT5uZXh0KSB7DQorCQkJKmFkZHIgPSBwYXRoLT5hZGRyOw0K
KwkJCXZhbCA9IHBhdGgtPnZhbDsNCisJCQlicmVhazsNCisJCX0NCisJfQ0KKw0KKwlyZXR1cm4g
dmFsOw0KK30NCisNCitzdGF0aWMgdm9pZCBtdGtfbW1zeXNfZGRwX3NvdXRfc2VsKHZvaWQgX19p
b21lbSAqY29uZmlnX3JlZ3MsDQorCQkJCSAgIGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwNCisJ
CQkJICAgZW51bSBtdGtfZGRwX2NvbXBfaWQgbmV4dCkNCit7DQorCXUzMiBpOw0KKwl1MzIgdmFs
ID0gMDsNCisJdTMyIGFkZHIgPSAwOw0KKwlzdHJ1Y3QgbW1zeXNfcGF0aF9zZWwgKnBhdGg7DQor
DQorCWZvciAoaSA9IDA7IGkgPCBBUlJBWV9TSVpFKG1tc3lzX3NvdXRfc2VsKTsgaSsrKSB7DQor
CQlwYXRoID0gJm1tc3lzX3NvdXRfc2VsW2ldOw0KKwkJaWYgKGN1ciA9PSBwYXRoLT5jdXIgJiYg
bmV4dCA9PSBwYXRoLT5uZXh0KSB7DQorCQkJYWRkciA9IHBhdGgtPmFkZHI7DQorCQkJdmFsID0g
cGF0aC0+dmFsOw0KKwkJCWJyZWFrOw0KKwkJfQ0KKwl9DQorDQorCWlmICh2YWwpDQorCQl3cml0
ZWxfcmVsYXhlZCh2YWwsIGNvbmZpZ19yZWdzICsgYWRkcik7DQorfQ0KKw0KK3N0YXRpYyBzdHJ1
Y3QgbXRrX21tc3lzX2Nvbm5fZnVuY3MgbW1zeXNfZnVuY3MgPSB7DQorCS5tb3V0X2VuID0gbXRr
X21tc3lzX2RkcF9tb3V0X2VuLA0KKwkuc2VsX2luID0gbXRrX21tc3lzX2RkcF9zZWxfaW4sDQor
CS5zb3V0X3NlbCA9IG10a19tbXN5c19kZHBfc291dF9zZWwsDQorfTsNCisNCitzdGF0aWMgaW50
IG1tc3lzX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQorew0KKwlzdHJ1Y3Qg
ZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2Ow0KKw0KKwltdGtfbW1zeXNfcmVnaXN0ZXJfY29ubl9m
dW5jcyhkZXYtPnBhcmVudCwgJm1tc3lzX2Z1bmNzKTsNCisNCisJcmV0dXJuIDA7DQorfQ0KKw0K
K3N0YXRpYyBzdHJ1Y3QgcGxhdGZvcm1fZHJpdmVyIG1tc3lzX2RydiA9IHsNCisJLnByb2JlID0g
bW1zeXNfcHJvYmUsDQorCS5kcml2ZXIgPSB7DQorCQkubmFtZSA9ICJtdDgxODMtbW1zeXMiLA0K
Kwl9LA0KK307DQorDQorYnVpbHRpbl9wbGF0Zm9ybV9kcml2ZXIobW1zeXNfZHJ2KTsNCmRpZmYg
LS1naXQgYS9kcml2ZXJzL3NvYy9tZWRpYXRlay9tdGstbW1zeXMuYyBiL2RyaXZlcnMvc29jL21l
ZGlhdGVrL210ay1tbXN5cy5jDQppbmRleCA2MDViOTkyLi42YTQ1MWFjIDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9zb2MvbWVkaWF0ZWsvbXRrLW1tc3lzLmMNCisrKyBiL2RyaXZlcnMvc29jL21lZGlh
dGVrL210ay1tbXN5cy5jDQpAQCAtNDcsNiArNDcsNyBAQCBzdHJ1Y3QgbXRrX21tc3lzX3ByaXZh
dGVfZGF0YSB7DQogDQogc3RhdGljIGNvbnN0IHN0cnVjdCBtdGtfbW1zeXNfZHJpdmVyX2RhdGEg
bXQ4MTgzX21tc3lzX2RyaXZlcl9kYXRhID0gew0KIAkuY2xrX2RyaXZlciA9ICJjbGstbXQ4MTgz
LW1tIiwNCisJLm1tc3lzX2RyaXZlciA9ICJtdDgxODMtbW1zeXMiLA0KIH07DQogDQogdm9pZCBt
dGtfbW1zeXNfZGRwX2Nvbm5lY3Qoc3RydWN0IGRldmljZSAqZGV2LA0KLS0gDQoxLjguMS4xLmRp
cnR5DQo=

