Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 78A3E244E38
	for <lists+linux-kernel@lfdr.de>; Fri, 14 Aug 2020 19:49:32 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728497AbgHNRtb (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 14 Aug 2020 13:49:31 -0400
Received: from mail.kernel.org ([198.145.29.99]:37834 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1726713AbgHNRt3 (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 14 Aug 2020 13:49:29 -0400
Received: from quaco.ghostprotocols.net (unknown [179.97.37.151])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by mail.kernel.org (Postfix) with ESMTPSA id 3E6D720774;
        Fri, 14 Aug 2020 17:49:21 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=default; t=1597427368;
        bh=Coqo1xHd2B2ZUyMip7nMx5cTmVEYsq9NDJf0hNeB40U=;
        h=From:To:Cc:Subject:Date:From;
        b=y2dlQgIutqdfRs8sLslX5NKLSQhpy7CcKFiBf2wDsZqx4zjpy4SXaX85bvTTCar88
         Y1e9vFHY7ne3/Ih16Lqb86f3Ig9Hhh/6Uy1j6aTY6zu44LiacAjENpLi5ftcMDD8G0
         hLcgC2wr3YhOwlbgMQ5EYw1yIAmZGXfcb8T6lDuo=
From:   Arnaldo Carvalho de Melo <acme@kernel.org>
To:     Linus Torvalds <torvalds@linux-foundation.org>
Cc:     Ingo Molnar <mingo@kernel.org>,
        Thomas Gleixner <tglx@linutronix.de>,
        Jiri Olsa <jolsa@kernel.org>,
        Namhyung Kim <namhyung@kernel.org>,
        linux-kernel@vger.kernel.org, linux-perf-users@vger.kernel.org,
        Arnaldo Carvalho de Melo <acme@kernel.org>,
        Alexander Gordeev <agordeev@linux.ibm.com>,
        Changbin Du <changbin.du@gmail.com>,
        Colin King <colin.king@canonical.com>,
        =?UTF-8?q?Daniel=20D=C3=ADaz?= <daniel.diaz@linaro.org>,
        David Ahern <dsahern@kernel.org>,
        "Frank Ch . Eigler" <fche@redhat.com>,
        Michael Petlan <mpetlan@redhat.com>,
        Paul Clarke <pc@us.ibm.com>, Peng Fan <fanpeng@loongson.cn>,
        Rob Herring <robh@kernel.org>,
        Vincent Whitchurch <vincent.whitchurch@axis.com>
Subject: [GIT PULL] perf tool changes for v5.9: 2nd batch
Date:   Fri, 14 Aug 2020 14:49:17 -0300
Message-Id: <20200814174917.2591425-1-acme@kernel.org>
X-Mailer: git-send-email 2.26.2
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Hi Linus,

	Please consider pulling,

Best regards,

- Arnaldo

The following changes since commit fb893de323e2d39f7a1f6df425703a2edbdf56ea:

  Merge tag 'tag-chrome-platform-for-v5.9' of git://git.kernel.org/pub/scm/linux/kernel/git/chrome-platform/linux (2020-08-11 17:28:32 -0700)

are available in the Git repository at:

  git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux.git tags/perf-tools-2020-08-14

for you to fetch changes up to 492e4edba6e2fc0620a69266d33f29c4a1f9ac1e:

  perf ftrace: Make option description initials all capital letters (2020-08-14 09:55:33 -0300)

----------------------------------------------------------------
perf tools changes for v5.9: 2nd batch

Fixes:

- Fixes for 'perf bench numa'.

- Always memset source before memcpy in 'perf bench mem'.

- Quote CC and CXX for their arguments to fix build in environments using
  those variables to pass more than just the compiler names.

- Fix module symbol processing, addressing regression detected via "perf test".

- Allow multiple probes in record+script_probe_vfs_getname.sh 'perf test' entry.

Improvements:

- Add script to autogenerate socket family name id->string table from copy of
  kernel header, used so far in 'perf trace'.

- 'perf ftrace' improvements to provide similar options for this utility so
  that one can go from 'perf record', 'perf trace', etc to 'perf ftrace' just
  by changing the name of the subcommand.

- Prefer new "sched:sched_waking" trace event when it exists in 'perf sched'
  post processing.

- Update POWER9 metrics to utilize other metrics.

- Fall back to querying debuginfod if debuginfo not found locally.

Miscellaneous:

- Sync various kvm headers with kernel sources.

Alexander Gordeev (4):
      perf bench numa: Fix number of processes in "2x3-convergence" test
      perf bench numa: Fix benchmark names
      perf bench numa: Fix cpumask memory leak in node_has_cpus()
      perf bench numa: Use numa_node_to_cpus() to bind tasks to nodes

Arnaldo Carvalho de Melo (6):
      perf trace beauty: Add script to autogenerate socket families table
      perf trace beauty: Use the autogenerated protocol family table
      tools headers kvm s390: Sync headers with the kernel sources
      tools include UAPI: Sync linux/vhost.h with the kernel sources
      tools headers UAPI: Sync kvm.h headers with the kernel sources
      perf ftrace: Make option description initials all capital letters

Changbin Du (18):
      perf ftrace: Select function/function_graph tracer automatically
      perf ftrace: Add option '-F/--funcs' to list available functions
      perf ftrace: Factor out function write_tracing_file_int()
      perf ftrace: Add option '-m/--buffer-size' to set per-cpu buffer size
      perf ftrace: Show trace column header
      perf ftrace: Add option '--inherit' to trace children processes
      perf tools: Add general function to parse sublevel options
      perf ftrace: Add support for tracing option 'func_stack_trace'
      perf ftrace: Add support for trace option sleep-time
      perf ftrace: Add support for trace option funcgraph-irqs
      perf ftrace: Add support for tracing option 'irq-info'
      perf ftrace: Add option 'verbose' to show more info for graph tracer
      perf ftrace: Add support for trace option tracing_thresh
      perf: ftrace: Allow set graph depth by '--graph-opts'
      perf ftrace: Add option -D/--delay to delay tracing
      perf ftrace: Add option --tid to filter by thread id
      perf: ftrace: Add set_tracing_options() to set all trace options
      perf ftrace: Add change log

Colin Ian King (1):
      perf bench: Fix a couple of spelling mistakes in options text

Daniel DÃ­az (1):
      tools build feature: Quote CC and CXX for their arguments

David Ahern (1):
      perf sched: Prefer sched_waking event when it exists

Frank Ch. Eigler (1):
      perf build-ids: Fall back to debuginfod query if debuginfo not found

Jiri Olsa (2):
      perf tools: Rename 'enum dso_kernel_type' to 'enum dso_space_type'
      perf tools: Fix module symbol processing

Michael Petlan (1):
      perf test: Allow multiple probes in record+script_probe_vfs_getname.sh

Paul A. Clarke (1):
      perf stat: Update POWER9 metrics to utilize other metrics

Peng Fan (1):
      perf bench numa: Remove dead code in parse_nodes_opt()

Rob Herring (2):
      libperf: Fix man page typos
      MAINTAINERS: Add missing tools/lib/perf/ path to perf maintainers

Vincent Whitchurch (1):
      perf bench mem: Always memset source before memcpy

 MAINTAINERS                                        |   1 +
 tools/arch/s390/include/uapi/asm/kvm.h             |   7 +-
 tools/build/Makefile.feature                       |   5 +-
 tools/build/feature/Makefile                       |   4 +
 tools/build/feature/test-libdebuginfod.c           |   8 +
 tools/include/uapi/linux/kvm.h                     |   4 +
 tools/include/uapi/linux/vhost.h                   |   2 +
 tools/lib/perf/Documentation/libperf-counting.txt  |  14 +-
 tools/lib/perf/Documentation/libperf-sampling.txt  |  13 +-
 tools/lib/perf/Documentation/libperf.txt           |   4 +-
 tools/perf/Documentation/perf-config.txt           |   5 +-
 tools/perf/Documentation/perf-ftrace.txt           |  75 +++-
 tools/perf/Makefile.config                         |   8 +
 tools/perf/Makefile.perf                           |  11 +
 tools/perf/bench/find-bit-bench.c                  |   4 +-
 tools/perf/bench/mem-functions.c                   |  21 +-
 tools/perf/bench/numa.c                            |  77 ++--
 tools/perf/builtin-ftrace.c                        | 436 ++++++++++++++++++--
 tools/perf/builtin-sched.c                         |  32 +-
 tools/perf/check-headers.sh                        |   3 +
 .../pmu-events/arch/powerpc/power9/metrics.json    |  48 +--
 .../tests/shell/record+script_probe_vfs_getname.sh |   4 +-
 tools/perf/trace/beauty/include/linux/socket.h     | 442 +++++++++++++++++++++
 tools/perf/trace/beauty/sockaddr.c                 |   9 +-
 tools/perf/trace/beauty/socket.sh                  |  24 ++
 tools/perf/util/Build                              |   1 +
 tools/perf/util/build-id.c                         |  19 +
 tools/perf/util/debug.c                            |  61 +--
 tools/perf/util/dso.c                              |   2 +-
 tools/perf/util/dso.h                              |  10 +-
 tools/perf/util/header.c                           |  13 +-
 tools/perf/util/machine.c                          |  16 +-
 tools/perf/util/map.c                              |   4 +-
 tools/perf/util/parse-sublevel-options.c           |  70 ++++
 tools/perf/util/parse-sublevel-options.h           |  11 +
 tools/perf/util/symbol-elf.c                       |   8 +-
 tools/perf/util/symbol.c                           |  24 +-
 37 files changed, 1253 insertions(+), 247 deletions(-)
 create mode 100644 tools/build/feature/test-libdebuginfod.c
 create mode 100644 tools/perf/trace/beauty/include/linux/socket.h
 create mode 100755 tools/perf/trace/beauty/socket.sh
 create mode 100644 tools/perf/util/parse-sublevel-options.c
 create mode 100644 tools/perf/util/parse-sublevel-options.h
