Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id B9AB323F619
	for <lists+linux-kernel@lfdr.de>; Sat,  8 Aug 2020 04:55:48 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726630AbgHHCzI (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 7 Aug 2020 22:55:08 -0400
Received: from mailgw02.mediatek.com ([210.61.82.184]:58624 "EHLO
        mailgw02.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726202AbgHHCyw (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 7 Aug 2020 22:54:52 -0400
X-UUID: 79abee187e61478eba3db12305ebaced-20200808
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=idHOUVrVZugVAKkni982q3yiPMjYf4/xnF0t90g2qp0=;
        b=ByJpi7c7vIGhSvLsBvJcDbmE2CiE9+udvB7pKkf25fbeYWCe7a2izi96j8CGtyHfiNANS0aafsMWHf056rBarBkBIyZXZ50idsrpStXNyP0xe9op2NVbOf6/Yn6GS2WIYt3HcByWhdQjdNphYx2IktOAsubgDz9E8PpV8W00xyM=;
X-UUID: 79abee187e61478eba3db12305ebaced-20200808
Received: from mtkcas10.mediatek.inc [(172.21.101.39)] by mailgw02.mediatek.com
        (envelope-from <yongqiang.niu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 2082948566; Sat, 08 Aug 2020 10:54:43 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 mtkmbs05n2.mediatek.inc (172.21.101.140) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Sat, 8 Aug 2020 10:54:42 +0800
Received: from localhost.localdomain (10.17.3.153) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Sat, 8 Aug 2020 10:54:42 +0800
From:   Yongqiang Niu <yongqiang.niu@mediatek.com>
To:     CK Hu <ck.hu@mediatek.com>, Philipp Zabel <p.zabel@pengutronix.de>,
        Rob Herring <robh+dt@kernel.org>,
        Matthias Brugger <matthias.bgg@gmail.com>
CC:     David Airlie <airlied@linux.ie>, Daniel Vetter <daniel@ffwll.ch>,
        Mark Rutland <mark.rutland@arm.com>,
        <dri-devel@lists.freedesktop.org>, <devicetree@vger.kernel.org>,
        <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        Yongqiang Niu <yongqiang.niu@mediatek.com>
Subject: [RESEND v7, PATCH 4/7] mtk-mmsys: add mt8183 mmsys support
Date:   Sat, 8 Aug 2020 10:53:48 +0800
Message-ID: <1596855231-5782-5-git-send-email-yongqiang.niu@mediatek.com>
X-Mailer: git-send-email 1.8.1.1.dirty
In-Reply-To: <1596855231-5782-1-git-send-email-yongqiang.niu@mediatek.com>
References: <1596855231-5782-1-git-send-email-yongqiang.niu@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

YWRkIG10ODE4MyBtbXN5cyBzdXBwb3J0DQoNClNpZ25lZC1vZmYtYnk6IFlvbmdxaWFuZyBOaXUg
PHlvbmdxaWFuZy5uaXVAbWVkaWF0ZWsuY29tPg0KLS0tDQogZHJpdmVycy9zb2MvbWVkaWF0ZWsv
bW1zeXMvTWFrZWZpbGUgICAgICAgfCAgIDEgKw0KIGRyaXZlcnMvc29jL21lZGlhdGVrL21tc3lz
L210ODE4My1tbXN5cy5jIHwgMTU0ICsrKysrKysrKysrKysrKysrKysrKysrKysrKysrKw0KIGRy
aXZlcnMvc29jL21lZGlhdGVrL210ay1tbXN5cy5jICAgICAgICAgIHwgICAxICsNCiAzIGZpbGVz
IGNoYW5nZWQsIDE1NiBpbnNlcnRpb25zKCspDQogY3JlYXRlIG1vZGUgMTAwNjQ0IGRyaXZlcnMv
c29jL21lZGlhdGVrL21tc3lzL210ODE4My1tbXN5cy5jDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJz
L3NvYy9tZWRpYXRlay9tbXN5cy9NYWtlZmlsZSBiL2RyaXZlcnMvc29jL21lZGlhdGVrL21tc3lz
L01ha2VmaWxlDQppbmRleCAzM2IwZGFiLi42MmNmZWRmIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9z
b2MvbWVkaWF0ZWsvbW1zeXMvTWFrZWZpbGUNCisrKyBiL2RyaXZlcnMvc29jL21lZGlhdGVrL21t
c3lzL01ha2VmaWxlDQpAQCAtMSwyICsxLDMgQEANCiAjIFNQRFgtTGljZW5zZS1JZGVudGlmaWVy
OiBHUEwtMi4wLW9ubHkNCiBvYmoteSArPSBtdDI3MDEtbW1zeXMubw0KK29iai15ICs9IG10ODE4
My1tbXN5cy5vDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zb2MvbWVkaWF0ZWsvbW1zeXMvbXQ4MTgz
LW1tc3lzLmMgYi9kcml2ZXJzL3NvYy9tZWRpYXRlay9tbXN5cy9tdDgxODMtbW1zeXMuYw0KbmV3
IGZpbGUgbW9kZSAxMDA2NDQNCmluZGV4IDAwMDAwMDAuLmU1MTcwYjUNCi0tLSAvZGV2L251bGwN
CisrKyBiL2RyaXZlcnMvc29jL21lZGlhdGVrL21tc3lzL210ODE4My1tbXN5cy5jDQpAQCAtMCww
ICsxLDE1NCBAQA0KKy8vIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wDQorLy8NCisv
LyBDb3B5cmlnaHQgKGMpIDIwMjAgTWVkaWFUZWsgSW5jLg0KKw0KKyNpbmNsdWRlIDxsaW51eC9k
ZXZpY2UuaD4NCisjaW5jbHVkZSA8bGludXgvaW8uaD4NCisjaW5jbHVkZSA8bGludXgvb2ZfZGV2
aWNlLmg+DQorI2luY2x1ZGUgPGxpbnV4L3BsYXRmb3JtX2RldmljZS5oPg0KKyNpbmNsdWRlIDxs
aW51eC9zb2MvbWVkaWF0ZWsvbXRrLW1tc3lzLmg+DQorDQorI2RlZmluZSBESVNQX09WTDBfTU9V
VF9FTgkJMHhmMDANCisjZGVmaW5lIERJU1BfT1ZMMF8yTF9NT1VUX0VOCQkweGYwNA0KKyNkZWZp
bmUgRElTUF9PVkwxXzJMX01PVVRfRU4JCTB4ZjA4DQorI2RlZmluZSBESVNQX0RJVEhFUjBfTU9V
VF9FTgkJMHhmMGMNCisjZGVmaW5lIERJU1BfUEFUSDBfU0VMX0lOCQkweGYyNA0KKyNkZWZpbmUg
RElTUF9EU0kwX1NFTF9JTgkJMHhmMmMNCisjZGVmaW5lIERJU1BfRFBJMF9TRUxfSU4JCTB4ZjMw
DQorI2RlZmluZSBESVNQX1JETUEwX1NPVVRfU0VMX0lOCQkweGY1MA0KKyNkZWZpbmUgRElTUF9S
RE1BMV9TT1VUX1NFTF9JTgkJMHhmNTQNCisNCisjZGVmaW5lIE9WTDBfTU9VVF9FTl9PVkwwXzJM
CQkJQklUKDQpDQorI2RlZmluZSBPVkwwXzJMX01PVVRfRU5fRElTUF9QQVRIMAkJQklUKDApDQor
I2RlZmluZSBPVkwxXzJMX01PVVRfRU5fUkRNQTEJCQlCSVQoNCkNCisjZGVmaW5lIERJVEhFUjBf
TU9VVF9JTl9EU0kwCQkJQklUKDApDQorI2RlZmluZSBESVNQX1BBVEgwX1NFTF9JTl9PVkwwXzJM
CQkweDENCisjZGVmaW5lIERTSTBfU0VMX0lOX1JETUEwCQkJMHgxDQorI2RlZmluZSBEU0kwX1NF
TF9JTl9SRE1BMQkJCTB4Mw0KKyNkZWZpbmUgRFBJMF9TRUxfSU5fUkRNQTAJCQkweDENCisjZGVm
aW5lIERQSTBfU0VMX0lOX1JETUExCQkJMHgyDQorI2RlZmluZSBSRE1BMF9TT1VUX0NPTE9SMAkJ
CTB4MQ0KKyNkZWZpbmUgUkRNQTFfU09VVF9EU0kwCQkJCTB4MQ0KKw0KK3N0cnVjdCBtbXN5c19w
YXRoX3NlbCB7DQorCWVudW0gbXRrX2RkcF9jb21wX2lkIGN1cjsNCisJZW51bSBtdGtfZGRwX2Nv
bXBfaWQgbmV4dDsNCisJdTMyIGFkZHI7DQorCXUzMiB2YWw7DQorfTsNCisNCitzdGF0aWMgc3Ry
dWN0IG1tc3lzX3BhdGhfc2VsIG1tc3lzX21vdXRfZW5bXSA9IHsNCisJew0KKwkJRERQX0NPTVBP
TkVOVF9PVkwwLCBERFBfQ09NUE9ORU5UX09WTF8yTDAsDQorCQlESVNQX09WTDBfTU9VVF9FTiwg
T1ZMMF9NT1VUX0VOX09WTDBfMkwsDQorCX0sDQorCXsNCisJCUREUF9DT01QT05FTlRfT1ZMXzJM
MCwgRERQX0NPTVBPTkVOVF9SRE1BMCwNCisJCURJU1BfT1ZMMF8yTF9NT1VUX0VOLCBPVkwwXzJM
X01PVVRfRU5fRElTUF9QQVRIMCwNCisJfSwNCisJew0KKwkJRERQX0NPTVBPTkVOVF9PVkxfMkwx
LCBERFBfQ09NUE9ORU5UX1JETUExLA0KKwkJRElTUF9PVkwxXzJMX01PVVRfRU4sIE9WTDFfMkxf
TU9VVF9FTl9SRE1BMSwNCisJfSwNCisJew0KKwkJRERQX0NPTVBPTkVOVF9ESVRIRVIsIEREUF9D
T01QT05FTlRfRFNJMCwNCisJCURJU1BfRElUSEVSMF9NT1VUX0VOLCBESVRIRVIwX01PVVRfSU5f
RFNJMCwNCisJfSwNCit9Ow0KKw0KK3N0YXRpYyBzdHJ1Y3QgbW1zeXNfcGF0aF9zZWwgbW1zeXNf
c2VsX2luW10gPSB7DQorCXsNCisJCUREUF9DT01QT05FTlRfT1ZMXzJMMCwgRERQX0NPTVBPTkVO
VF9SRE1BMCwNCisJCURJU1BfUEFUSDBfU0VMX0lOLCBESVNQX1BBVEgwX1NFTF9JTl9PVkwwXzJM
LA0KKwl9LA0KKwl7DQorCQlERFBfQ09NUE9ORU5UX1JETUExLCBERFBfQ09NUE9ORU5UX0RQSTAs
DQorCQlESVNQX0RQSTBfU0VMX0lOLCBEUEkwX1NFTF9JTl9SRE1BMSwNCisJfSwNCit9Ow0KKw0K
K3N0YXRpYyBzdHJ1Y3QgbW1zeXNfcGF0aF9zZWwgbW1zeXNfc291dF9zZWxbXSA9IHsNCisJew0K
KwkJRERQX0NPTVBPTkVOVF9SRE1BMCwgRERQX0NPTVBPTkVOVF9DT0xPUjAsDQorCQlESVNQX1JE
TUEwX1NPVVRfU0VMX0lOLCBSRE1BMF9TT1VUX0NPTE9SMCwNCisJfSwNCit9Ow0KKw0KK3N0YXRp
YyB1bnNpZ25lZCBpbnQgbXRrX21tc3lzX2RkcF9tb3V0X2VuKGVudW0gbXRrX2RkcF9jb21wX2lk
IGN1ciwNCisJCQkJCSAgZW51bSBtdGtfZGRwX2NvbXBfaWQgbmV4dCwNCisJCQkJCSAgdW5zaWdu
ZWQgaW50ICphZGRyKQ0KK3sNCisJdTMyIGk7DQorCXN0cnVjdCBtbXN5c19wYXRoX3NlbCAqcGF0
aDsNCisNCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUobW1zeXNfbW91dF9lbik7IGkrKykg
ew0KKwkJcGF0aCA9ICZtbXN5c19tb3V0X2VuW2ldOw0KKwkJaWYgKGN1ciA9PSBwYXRoLT5jdXIg
JiYgbmV4dCA9PSBwYXRoLT5uZXh0KSB7DQorCQkJKmFkZHIgPSBwYXRoLT5hZGRyOw0KKwkJCXJl
dHVybiBwYXRoLT52YWw7DQorCQl9DQorCX0NCisNCisJcmV0dXJuIDA7DQorfQ0KKw0KK3N0YXRp
YyB1bnNpZ25lZCBpbnQgbXRrX21tc3lzX2RkcF9zZWxfaW4oZW51bSBtdGtfZGRwX2NvbXBfaWQg
Y3VyLA0KKwkJCQkJIGVudW0gbXRrX2RkcF9jb21wX2lkIG5leHQsDQorCQkJCQkgdW5zaWduZWQg
aW50ICphZGRyKQ0KK3sNCisJdTMyIGk7DQorCXN0cnVjdCBtbXN5c19wYXRoX3NlbCAqcGF0aDsN
CisNCisJZm9yIChpID0gMDsgaSA8IEFSUkFZX1NJWkUobW1zeXNfc2VsX2luKTsgaSsrKSB7DQor
CQlwYXRoID0gJm1tc3lzX3NlbF9pbltpXTsNCisJCWlmIChjdXIgPT0gcGF0aC0+Y3VyICYmIG5l
eHQgPT0gcGF0aC0+bmV4dCkgew0KKwkJCSphZGRyID0gcGF0aC0+YWRkcjsNCisJCQlyZXR1cm4g
cGF0aC0+dmFsOw0KKwkJfQ0KKwl9DQorDQorCXJldHVybiAwOw0KK30NCisNCitzdGF0aWMgdm9p
ZCBtdGtfbW1zeXNfZGRwX3NvdXRfc2VsKHZvaWQgX19pb21lbSAqY29uZmlnX3JlZ3MsDQorCQkJ
CSAgIGVudW0gbXRrX2RkcF9jb21wX2lkIGN1ciwNCisJCQkJICAgZW51bSBtdGtfZGRwX2NvbXBf
aWQgbmV4dCkNCit7DQorCXUzMiBpOw0KKwl1MzIgdmFsID0gMDsNCisJdTMyIGFkZHIgPSAwOw0K
KwlzdHJ1Y3QgbW1zeXNfcGF0aF9zZWwgKnBhdGg7DQorDQorCWZvciAoaSA9IDA7IGkgPCBBUlJB
WV9TSVpFKG1tc3lzX3NvdXRfc2VsKTsgaSsrKSB7DQorCQlwYXRoID0gJm1tc3lzX3NvdXRfc2Vs
W2ldOw0KKwkJaWYgKGN1ciA9PSBwYXRoLT5jdXIgJiYgbmV4dCA9PSBwYXRoLT5uZXh0KSB7DQor
CQkJYWRkciA9IHBhdGgtPmFkZHI7DQorCQkJd3JpdGVsX3JlbGF4ZWQocGF0aC0+dmFsLCBjb25m
aWdfcmVncyArIGFkZHIpOw0KKwkJCXJldHVybjsNCisJCX0NCisJfQ0KK30NCisNCitzdGF0aWMg
c3RydWN0IG10a19tbXN5c19jb25uX2Z1bmNzIG1tc3lzX2Z1bmNzID0gew0KKwkubW91dF9lbiA9
IG10a19tbXN5c19kZHBfbW91dF9lbiwNCisJLnNlbF9pbiA9IG10a19tbXN5c19kZHBfc2VsX2lu
LA0KKwkuc291dF9zZWwgPSBtdGtfbW1zeXNfZGRwX3NvdXRfc2VsLA0KK307DQorDQorc3RhdGlj
IGludCBtbXN5c19wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQ0KK3sNCisJc3Ry
dWN0IGRldmljZSAqZGV2ID0gJnBkZXYtPmRldjsNCisNCisJbXRrX21tc3lzX3JlZ2lzdGVyX2Nv
bm5fZnVuY3MoZGV2LT5wYXJlbnQsICZtbXN5c19mdW5jcyk7DQorDQorCXJldHVybiAwOw0KK30N
CisNCitzdGF0aWMgc3RydWN0IHBsYXRmb3JtX2RyaXZlciBtbXN5c19kcnYgPSB7DQorCS5wcm9i
ZSA9IG1tc3lzX3Byb2JlLA0KKwkuZHJpdmVyID0gew0KKwkJLm5hbWUgPSAibXQ4MTgzLW1tc3lz
IiwNCisJfSwNCit9Ow0KKw0KK2J1aWx0aW5fcGxhdGZvcm1fZHJpdmVyKG1tc3lzX2Rydik7DQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9zb2MvbWVkaWF0ZWsvbXRrLW1tc3lzLmMgYi9kcml2ZXJzL3Nv
Yy9tZWRpYXRlay9tdGstbW1zeXMuYw0KaW5kZXggNjA1Yjk5Mi4uNmE0NTFhYyAxMDA2NDQNCi0t
LSBhL2RyaXZlcnMvc29jL21lZGlhdGVrL210ay1tbXN5cy5jDQorKysgYi9kcml2ZXJzL3NvYy9t
ZWRpYXRlay9tdGstbW1zeXMuYw0KQEAgLTQ3LDYgKzQ3LDcgQEAgc3RydWN0IG10a19tbXN5c19w
cml2YXRlX2RhdGEgew0KIA0KIHN0YXRpYyBjb25zdCBzdHJ1Y3QgbXRrX21tc3lzX2RyaXZlcl9k
YXRhIG10ODE4M19tbXN5c19kcml2ZXJfZGF0YSA9IHsNCiAJLmNsa19kcml2ZXIgPSAiY2xrLW10
ODE4My1tbSIsDQorCS5tbXN5c19kcml2ZXIgPSAibXQ4MTgzLW1tc3lzIiwNCiB9Ow0KIA0KIHZv
aWQgbXRrX21tc3lzX2RkcF9jb25uZWN0KHN0cnVjdCBkZXZpY2UgKmRldiwNCi0tIA0KMS44LjEu
MS5kaXJ0eQ0K

