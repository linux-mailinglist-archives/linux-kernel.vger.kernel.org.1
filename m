Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 2E44D2D0BE1
	for <lists+linux-kernel@lfdr.de>; Mon,  7 Dec 2020 09:40:20 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726251AbgLGIjh (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 7 Dec 2020 03:39:37 -0500
Received: from mx2.suse.de ([195.135.220.15]:59090 "EHLO mx2.suse.de"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1725905AbgLGIjh (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 7 Dec 2020 03:39:37 -0500
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.221.27])
        by mx2.suse.de (Postfix) with ESMTP id 36D3AACBA;
        Mon,  7 Dec 2020 08:38:56 +0000 (UTC)
Date:   Mon, 07 Dec 2020 09:38:56 +0100
Message-ID: <s5h360i2eov.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Chris Chiu <chiu@endlessos.org>
Cc:     tiwai@suse.com, kailang@realtek.com, alsa-devel@alsa-project.org,
        linux-kernel@vger.kernel.org, linux@endlessos.org,
        Jian-Hong Pan <jhp@endlessos.org>
Subject: Re: [PATCH] ALSA: hda/realtek - Add support for Memeza EDL03 headset mic
In-Reply-To: <20201207073346.16571-1-chiu@endlessos.org>
References: <20201207073346.16571-1-chiu@endlessos.org>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, 07 Dec 2020 08:33:46 +0100,
Chris Chiu wrote:
> 
> The Memeza laptop EDL03 with codec ALC256 can't detect the headset
> microphone. The headphone jack sensing works after we add a pin
> definition for it by ALC256_FIXUP_ASUS_MIC_NO_PRESENCE.
> 
> Signed-off-by: Chris Chiu <chiu@endlessos.org>
> Signed-off-by: Jian-Hong Pan <jhp@endlessos.org>
> ---
>  sound/pci/hda/patch_realtek.c | 1 +
>  1 file changed, 1 insertion(+)
> 
> diff --git a/sound/pci/hda/patch_realtek.c b/sound/pci/hda/patch_realtek.c
> index d5e4d0ba1008..8b9b94cfc67e 100644
> --- a/sound/pci/hda/patch_realtek.c
> +++ b/sound/pci/hda/patch_realtek.c
> @@ -7871,6 +7871,7 @@ static const struct snd_pci_quirk alc269_fixup_tbl[] = {
>  	SND_PCI_QUIRK(0x10cf, 0x1629, "Lifebook U7x7", ALC255_FIXUP_LIFEBOOK_U7x7_HEADSET_MIC),
>  	SND_PCI_QUIRK(0x10cf, 0x1845, "Lifebook U904", ALC269_FIXUP_LIFEBOOK_EXTMIC),
>  	SND_PCI_QUIRK(0x10ec, 0x10f2, "Intel Reference board", ALC700_FIXUP_INTEL_REFERENCE),
> +	SND_PCI_QUIRK(0x10ec, 0x115a, "Memeza EDL03", ALC256_FIXUP_ASUS_MIC_NO_PRESENCE),

This looks suspicious.  10ec is the vendor ID for Realtek, i.e. it
implies that the BIOS on this machine didn't give the proper unique
ID.  As you can see, the other entries with 10ec are only reference
boards.

If the newer BIOS still doesn't fix the PCI SSID, you can check the
codec SSID instead.


thanks,

Takashi
