Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 647022721E0
	for <lists+linux-kernel@lfdr.de>; Mon, 21 Sep 2020 13:09:37 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726692AbgIULJe (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 21 Sep 2020 07:09:34 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:34760 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726333AbgIULJX (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 21 Sep 2020 07:09:23 -0400
X-Greylist: delayed 301 seconds by postgrey-1.27 at vger.kernel.org; Mon, 21 Sep 2020 07:09:19 EDT
X-UUID: cb65ec71b0ba4561b8e246e456b7ae40-20200921
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=oAGYxPVFPywLvt9/WnSF12OmIQju8fi5QaJDJRs3Frk=;
        b=K/oCqST0/II7VYs4l0qKCO3dXeufYURzWxFfM/QZojKTESCf0hHo3K/fMTvoByVVRFGzI4uh2KJfu0VTNUft+yfBwEP15iVUdmR9nrF/vTG42cD9MowMBoCKql9CbdFsV8jafZd644Gqbk0vm83SetY4tl3j4SHIbZXucWjOivA=;
X-UUID: cb65ec71b0ba4561b8e246e456b7ae40-20200921
Received: from mtkcas11.mediatek.inc [(172.21.101.40)] by mailgw01.mediatek.com
        (envelope-from <hsin-hsiung.wang@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.14 Build 0819 with TLSv1.2 ECDHE-RSA-AES256-SHA384 256/256)
        with ESMTP id 871396871; Mon, 21 Sep 2020 19:04:13 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 mtkmbs07n2.mediatek.inc (172.21.101.141) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Mon, 21 Sep 2020 19:04:11 +0800
Received: from mtksdaap41.mediatek.inc (172.21.77.4) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Mon, 21 Sep 2020 19:04:12 +0800
From:   Hsin-Hsiung Wang <hsin-hsiung.wang@mediatek.com>
To:     Rob Herring <robh+dt@kernel.org>,
        Matthias Brugger <matthias.bgg@gmail.com>,
        Argus Lin <argus.lin@mediatek.com>, <drinkcat@chromium.org>
CC:     <devicetree@vger.kernel.org>, <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        <srv_heupstream@mediatek.com>,
        Hsin-Hsiung Wang <hsin-hsiung.wang@mediatek.com>
Subject: [PATCH v3 2/4] soc: mediatek: pwrap: add arbiter capability
Date:   Mon, 21 Sep 2020 19:03:53 +0800
Message-ID: <1600686235-27979-3-git-send-email-hsin-hsiung.wang@mediatek.com>
X-Mailer: git-send-email 2.6.4
In-Reply-To: <1600686235-27979-1-git-send-email-hsin-hsiung.wang@mediatek.com>
References: <1600686235-27979-1-git-send-email-hsin-hsiung.wang@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-MTK:  N
Content-Transfer-Encoding: base64
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

QWRkIGFyYml0ZXIgY2FwYWJpbGl0eSBmb3IgcHdyYXAgZHJpdmVyLg0KVGhpcyBwYXRjaCBpcyBw
cmVwYXJpbmcgZm9yIGFkZGluZyBtdDY4NzMvODE5MiBwd3JhcCBzdXBwb3J0Lg0KDQpTaWduZWQt
b2ZmLWJ5OiBIc2luLUhzaXVuZyBXYW5nIDxoc2luLWhzaXVuZy53YW5nQG1lZGlhdGVrLmNvbT4N
Ci0tLQ0KIGRyaXZlcnMvc29jL21lZGlhdGVrL210ay1wbWljLXdyYXAuYyB8IDU3ICsrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKy0tLS0tLQ0KIDEgZmlsZSBjaGFuZ2VkLCA0OCBpbnNlcnRp
b25zKCspLCA5IGRlbGV0aW9ucygtKQ0KDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9zb2MvbWVkaWF0
ZWsvbXRrLXBtaWMtd3JhcC5jIGIvZHJpdmVycy9zb2MvbWVkaWF0ZWsvbXRrLXBtaWMtd3JhcC5j
DQppbmRleCBjODk3MjA1Li4xNDliZjAyIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9zb2MvbWVkaWF0
ZWsvbXRrLXBtaWMtd3JhcC5jDQorKysgYi9kcml2ZXJzL3NvYy9tZWRpYXRlay9tdGstcG1pYy13
cmFwLmMNCkBAIC0yNSwxMCArMjUsMTIgQEANCiANCiAvKiBtYWNybyBmb3Igd3JhcHBlciBzdGF0
dXMgKi8NCiAjZGVmaW5lIFBXUkFQX0dFVF9XQUNTX1JEQVRBKHgpCQkoKCh4KSA+PiAwKSAmIDB4
MDAwMGZmZmYpDQorI2RlZmluZSBQV1JBUF9HRVRfV0FDU19BUkJfRlNNKHgpCSgoKHgpID4+IDEp
ICYgMHgwMDAwMDAwNykNCiAjZGVmaW5lIFBXUkFQX0dFVF9XQUNTX0ZTTSh4KQkJKCgoeCkgPj4g
MTYpICYgMHgwMDAwMDAwNykNCiAjZGVmaW5lIFBXUkFQX0dFVF9XQUNTX1JFUSh4KQkJKCgoeCkg
Pj4gMTkpICYgMHgwMDAwMDAwMSkNCiAjZGVmaW5lIFBXUkFQX1NUQVRFX1NZTkNfSURMRTAJCUJJ
VCgyMCkNCiAjZGVmaW5lIFBXUkFQX1NUQVRFX0lOSVRfRE9ORTAJCUJJVCgyMSkNCisjZGVmaW5l
IFBXUkFQX1NUQVRFX0lOSVRfRE9ORTEJCUJJVCgxNSkNCiANCiAvKiBtYWNybyBmb3IgV0FDUyBG
U00gKi8NCiAjZGVmaW5lIFBXUkFQX1dBQ1NfRlNNX0lETEUJCTB4MDANCkBAIC03NCw2ICs3Niw3
IEBADQogI2RlZmluZSBQV1JBUF9DQVBfRENNCQlCSVQoMikNCiAjZGVmaW5lIFBXUkFQX0NBUF9J
TlQxX0VOCUJJVCgzKQ0KICNkZWZpbmUgUFdSQVBfQ0FQX1dEVF9TUkMxCUJJVCg0KQ0KKyNkZWZp
bmUgUFdSQVBfQ0FQX0FSQgkJQklUKDUpDQogDQogLyogZGVmaW5lcyBmb3Igc2xhdmUgZGV2aWNl
IHdyYXBwZXIgcmVnaXN0ZXJzICovDQogZW51bSBkZXdfcmVncyB7DQpAQCAtMzQwLDYgKzM0Myw4
IEBAIGVudW0gcHdyYXBfcmVncyB7DQogCVBXUkFQX0RDTV9EQkNfUFJELA0KIAlQV1JBUF9FSU5U
X1NUQTBfQURSLA0KIAlQV1JBUF9FSU5UX1NUQTFfQURSLA0KKwlQV1JBUF9TV0lORl8yX1dEQVRB
XzMxXzAsDQorCVBXUkFQX1NXSU5GXzJfUkRBVEFfMzFfMCwNCiANCiAJLyogTVQyNzAxIG9ubHkg
cmVncyAqLw0KIAlQV1JBUF9BRENfQ01EX0FERFIsDQpAQCAtMTEwOCwxNCArMTExMywyMiBAQCBz
dGF0aWMgdm9pZCBwd3JhcF93cml0ZWwoc3RydWN0IHBtaWNfd3JhcHBlciAqd3JwLCB1MzIgdmFs
LCBlbnVtIHB3cmFwX3JlZ3MgcmVnKQ0KIA0KIHN0YXRpYyBib29sIHB3cmFwX2lzX2ZzbV9pZGxl
KHN0cnVjdCBwbWljX3dyYXBwZXIgKndycCkNCiB7DQotCXUzMiB2YWwgPSBwd3JhcF9yZWFkbCh3
cnAsIFBXUkFQX1dBQ1MyX1JEQVRBKTsNCisJdTMyIHZhbDsNCisNCisJdmFsID0gcHdyYXBfcmVh
ZGwod3JwLCBQV1JBUF9XQUNTMl9SREFUQSk7DQorCWlmIChIQVNfQ0FQKHdycC0+bWFzdGVyLT5j
YXBzLCBQV1JBUF9DQVBfQVJCKSkNCisJCXJldHVybiBQV1JBUF9HRVRfV0FDU19BUkJfRlNNKHZh
bCkgPT0gUFdSQVBfV0FDU19GU01fSURMRTsNCiANCiAJcmV0dXJuIFBXUkFQX0dFVF9XQUNTX0ZT
TSh2YWwpID09IFBXUkFQX1dBQ1NfRlNNX0lETEU7DQogfQ0KIA0KIHN0YXRpYyBib29sIHB3cmFw
X2lzX2ZzbV92bGRjbHIoc3RydWN0IHBtaWNfd3JhcHBlciAqd3JwKQ0KIHsNCi0JdTMyIHZhbCA9
IHB3cmFwX3JlYWRsKHdycCwgUFdSQVBfV0FDUzJfUkRBVEEpOw0KKwl1MzIgdmFsOw0KKw0KKwl2
YWwgPSBwd3JhcF9yZWFkbCh3cnAsIFBXUkFQX1dBQ1MyX1JEQVRBKTsNCisJaWYgKEhBU19DQVAo
d3JwLT5tYXN0ZXItPmNhcHMsIFBXUkFQX0NBUF9BUkIpKQ0KKwkJcmV0dXJuIFBXUkFQX0dFVF9X
QUNTX0FSQl9GU00odmFsKSA9PSBQV1JBUF9XQUNTX0ZTTV9XRlZMRENMUjsNCiANCiAJcmV0dXJu
IFBXUkFQX0dFVF9XQUNTX0ZTTSh2YWwpID09IFBXUkFQX1dBQ1NfRlNNX1dGVkxEQ0xSOw0KIH0N
CkBAIC0xMTY1LDYgKzExNzgsNyBAQCBzdGF0aWMgaW50IHB3cmFwX3dhaXRfZm9yX3N0YXRlKHN0
cnVjdCBwbWljX3dyYXBwZXIgKndycCwNCiBzdGF0aWMgaW50IHB3cmFwX3JlYWQxNihzdHJ1Y3Qg
cG1pY193cmFwcGVyICp3cnAsIHUzMiBhZHIsIHUzMiAqcmRhdGEpDQogew0KIAlpbnQgcmV0Ow0K
Kwl1MzIgdmFsOw0KIA0KIAlyZXQgPSBwd3JhcF93YWl0X2Zvcl9zdGF0ZSh3cnAsIHB3cmFwX2lz
X2ZzbV9pZGxlKTsNCiAJaWYgKHJldCkgew0KQEAgLTExNzIsMTMgKzExODYsMjEgQEAgc3RhdGlj
IGludCBwd3JhcF9yZWFkMTYoc3RydWN0IHBtaWNfd3JhcHBlciAqd3JwLCB1MzIgYWRyLCB1MzIg
KnJkYXRhKQ0KIAkJcmV0dXJuIHJldDsNCiAJfQ0KIA0KLQlwd3JhcF93cml0ZWwod3JwLCAoYWRy
ID4+IDEpIDw8IDE2LCBQV1JBUF9XQUNTMl9DTUQpOw0KKwlpZiAoSEFTX0NBUCh3cnAtPm1hc3Rl
ci0+Y2FwcywgUFdSQVBfQ0FQX0FSQikpDQorCQl2YWwgPSBhZHI7DQorCWVsc2UNCisJCXZhbCA9
IChhZHIgPj4gMSkgPDwgMTY7DQorCXB3cmFwX3dyaXRlbCh3cnAsIHZhbCwgUFdSQVBfV0FDUzJf
Q01EKTsNCiANCiAJcmV0ID0gcHdyYXBfd2FpdF9mb3Jfc3RhdGUod3JwLCBwd3JhcF9pc19mc21f
dmxkY2xyKTsNCiAJaWYgKHJldCkNCiAJCXJldHVybiByZXQ7DQogDQotCSpyZGF0YSA9IFBXUkFQ
X0dFVF9XQUNTX1JEQVRBKHB3cmFwX3JlYWRsKHdycCwgUFdSQVBfV0FDUzJfUkRBVEEpKTsNCisJ
aWYgKEhBU19DQVAod3JwLT5tYXN0ZXItPmNhcHMsIFBXUkFQX0NBUF9BUkIpKQ0KKwkJdmFsID0g
cHdyYXBfcmVhZGwod3JwLCBQV1JBUF9TV0lORl8yX1JEQVRBXzMxXzApOw0KKwllbHNlDQorCQl2
YWwgPSBwd3JhcF9yZWFkbCh3cnAsIFBXUkFQX1dBQ1MyX1JEQVRBKTsNCisJKnJkYXRhID0gUFdS
QVBfR0VUX1dBQ1NfUkRBVEEodmFsKTsNCiANCiAJcHdyYXBfd3JpdGVsKHdycCwgMSwgUFdSQVBf
V0FDUzJfVkxEQ0xSKTsNCiANCkBAIC0xMjI4LDggKzEyNTAsMTMgQEAgc3RhdGljIGludCBwd3Jh
cF93cml0ZTE2KHN0cnVjdCBwbWljX3dyYXBwZXIgKndycCwgdTMyIGFkciwgdTMyIHdkYXRhKQ0K
IAkJcmV0dXJuIHJldDsNCiAJfQ0KIA0KLQlwd3JhcF93cml0ZWwod3JwLCAoMSA8PCAzMSkgfCAo
KGFkciA+PiAxKSA8PCAxNikgfCB3ZGF0YSwNCi0JCSAgICAgUFdSQVBfV0FDUzJfQ01EKTsNCisJ
aWYgKCFIQVNfQ0FQKHdycC0+bWFzdGVyLT5jYXBzLCBQV1JBUF9DQVBfQVJCKSkgew0KKwkJcHdy
YXBfd3JpdGVsKHdycCwgQklUKDMxKSB8ICgoYWRyID4+IDEpIDw8IDE2KSB8IHdkYXRhLA0KKwkJ
CSAgICAgUFdSQVBfV0FDUzJfQ01EKTsNCisJfSBlbHNlIHsNCisJCXB3cmFwX3dyaXRlbCh3cnAs
IHdkYXRhLCBQV1JBUF9TV0lORl8yX1dEQVRBXzMxXzApOw0KKwkJcHdyYXBfd3JpdGVsKHdycCwg
QklUKDI5KSB8IGFkciwgUFdSQVBfV0FDUzJfQ01EKTsNCisJfQ0KIA0KIAlyZXR1cm4gMDsNCiB9
DQpAQCAtMjAyMiw2ICsyMDQ5LDcgQEAgTU9EVUxFX0RFVklDRV9UQUJMRShvZiwgb2ZfcHdyYXBf
bWF0Y2hfdGJsKTsNCiBzdGF0aWMgaW50IHB3cmFwX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZp
Y2UgKnBkZXYpDQogew0KIAlpbnQgcmV0LCBpcnE7DQorCXUzMiBtYXNrX2RvbmU7DQogCXN0cnVj
dCBwbWljX3dyYXBwZXIgKndycDsNCiAJc3RydWN0IGRldmljZV9ub2RlICpucCA9IHBkZXYtPmRl
di5vZl9ub2RlOw0KIAljb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkICpvZl9zbGF2ZV9pZCA9IE5V
TEw7DQpAQCAtMjExNiwxNCArMjE0NCwyMSBAQCBzdGF0aWMgaW50IHB3cmFwX3Byb2JlKHN0cnVj
dCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogCQl9DQogCX0NCiANCi0JaWYgKCEocHdyYXBfcmVh
ZGwod3JwLCBQV1JBUF9XQUNTMl9SREFUQSkgJiBQV1JBUF9TVEFURV9JTklUX0RPTkUwKSkgew0K
KwlpZiAoSEFTX0NBUCh3cnAtPm1hc3Rlci0+Y2FwcywgUFdSQVBfQ0FQX0FSQikpDQorCQltYXNr
X2RvbmUgPSBQV1JBUF9TVEFURV9JTklUX0RPTkUxOw0KKwllbHNlDQorCQltYXNrX2RvbmUgPSBQ
V1JBUF9TVEFURV9JTklUX0RPTkUwOw0KKw0KKwlpZiAoIShwd3JhcF9yZWFkbCh3cnAsIFBXUkFQ
X1dBQ1MyX1JEQVRBKSAmIG1hc2tfZG9uZSkpIHsNCiAJCWRldl9kYmcod3JwLT5kZXYsICJpbml0
aWFsaXphdGlvbiBpc24ndCBmaW5pc2hlZFxuIik7DQogCQlyZXQgPSAtRU5PREVWOw0KIAkJZ290
byBlcnJfb3V0MjsNCiAJfQ0KIA0KIAkvKiBJbml0aWFsaXplIHdhdGNoZG9nLCBtYXkgbm90IGJl
IGRvbmUgYnkgdGhlIGJvb3Rsb2FkZXIgKi8NCi0JcHdyYXBfd3JpdGVsKHdycCwgMHhmLCBQV1JB
UF9XRFRfVU5JVCk7DQorCWlmICghSEFTX0NBUCh3cnAtPm1hc3Rlci0+Y2FwcywgUFdSQVBfQ0FQ
X0FSQikpDQorCQlwd3JhcF93cml0ZWwod3JwLCAweGYsIFBXUkFQX1dEVF9VTklUKTsNCisNCiAJ
LyoNCiAJICogU2luY2UgU1RBVVBEIHdhcyBub3QgdXNlZCBvbiBtdDgxNzMgcGxhdGZvcm0sDQog
CSAqIHNvIFNUQVVQRCBvZiBXRFRfU1JDIHdoaWNoIHNob3VsZCBiZSB0dXJuZWQgb2ZmDQpAQCAt
MjEzMiw3ICsyMTY3LDExIEBAIHN0YXRpYyBpbnQgcHdyYXBfcHJvYmUoc3RydWN0IHBsYXRmb3Jt
X2RldmljZSAqcGRldikNCiAJaWYgKEhBU19DQVAod3JwLT5tYXN0ZXItPmNhcHMsIFBXUkFQX0NB
UF9XRFRfU1JDMSkpDQogCQlwd3JhcF93cml0ZWwod3JwLCB3cnAtPm1hc3Rlci0+d2R0X3NyYywg
UFdSQVBfV0RUX1NSQ19FTl8xKTsNCiANCi0JcHdyYXBfd3JpdGVsKHdycCwgMHgxLCBQV1JBUF9U
SU1FUl9FTik7DQorCWlmICghSEFTX0NBUCh3cnAtPm1hc3Rlci0+Y2FwcywgUFdSQVBfQ0FQX0FS
QikpDQorCQlwd3JhcF93cml0ZWwod3JwLCAweDEsIFBXUkFQX1RJTUVSX0VOKTsNCisJZWxzZQ0K
KwkJcHdyYXBfd3JpdGVsKHdycCwgMHgzLCBQV1JBUF9USU1FUl9FTik7DQorDQogCXB3cmFwX3dy
aXRlbCh3cnAsIHdycC0+bWFzdGVyLT5pbnRfZW5fYWxsLCBQV1JBUF9JTlRfRU4pOw0KIAkvKg0K
IAkgKiBXZSBhZGQgSU5UMSBpbnRlcnJ1cHQgdG8gaGFuZGxlIHN0YXJ2YXRpb24gYW5kIHJlcXVl
c3QgZXhjZXB0aW9uDQotLSANCjIuNi40DQo=

