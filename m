Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 0B0CB2EC252
	for <lists+linux-kernel@lfdr.de>; Wed,  6 Jan 2021 18:34:04 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728044AbhAFRdA (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Wed, 6 Jan 2021 12:33:00 -0500
Received: from mail.kernel.org ([198.145.29.99]:49420 "EHLO mail.kernel.org"
        rhost-flags-OK-OK-OK-OK) by vger.kernel.org with ESMTP
        id S1727869AbhAFRc6 (ORCPT <rfc822;linux-kernel@vger.kernel.org>);
        Wed, 6 Jan 2021 12:32:58 -0500
Received: by mail.kernel.org (Postfix) with ESMTPSA id BF07723329;
        Wed,  6 Jan 2021 17:31:23 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1609954284;
        bh=8JbShBIqEpEDHPHI5GiXY2vpWi6xXSof3d3PjJhO6cU=;
        h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
        b=TzxR9XuBwMvZkkVuugXUhbOspis6reyN9ruMpJJ7yuwZPO2RaitSw8BHcrvfYRQ54
         5IXp7eAKeR0X2p8eoW7GHst7161jMAd/rallVhF8ONn/BrAn/dRfLYNchNO0NjQPEb
         XzfV/QAbY4G5h1+fjtPHA2sEkyGevucayijMBJQGE5zRWonlslwBS4POoM+HF+SWLC
         COh15LVRl5Jd/B9VhcqbduhvHM+7j2Rk6KUI7pOD0v9PYpsqqaqhhYodQCq+BEKjoJ
         52cJA95TtvqPAwtR+eBjl6h9HcFrWiRNODSWsA3f4cjZ4VE4SVZ/mHwq9LO50TQLUP
         BLEBjDQyVQOYA==
From:   paulmck@kernel.org
To:     rcu@vger.kernel.org
Cc:     linux-kernel@vger.kernel.org, kernel-team@fb.com, mingo@kernel.org,
        jiangshanlai@gmail.com, akpm@linux-foundation.org,
        mathieu.desnoyers@efficios.com, josh@joshtriplett.org,
        tglx@linutronix.de, peterz@infradead.org, rostedt@goodmis.org,
        dhowells@redhat.com, edumazet@google.com, fweisbec@gmail.com,
        oleg@redhat.com, joel@joelfernandes.org,
        "Paul E. McKenney" <paulmck@kernel.org>
Subject: [PATCH tip/core/rcu 16/18] torture: Add command and results directory to torture.sh log
Date:   Wed,  6 Jan 2021 09:31:17 -0800
Message-Id: <20210106173119.23159-16-paulmck@kernel.org>
X-Mailer: git-send-email 2.9.5
In-Reply-To: <20210106173056.GA23035@paulmck-ThinkPad-P72>
References: <20210106173056.GA23035@paulmck-ThinkPad-P72>
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

From: "Paul E. McKenney" <paulmck@kernel.org>

This commit adds the command and arguments to the torture.sh log file, and
also outputs the results directory.  This latter allows impatient users
to quickly find the results that are being generated by the current run.

Signed-off-by: Paul E. McKenney <paulmck@kernel.org>
---
 tools/testing/selftests/rcutorture/bin/torture.sh | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

diff --git a/tools/testing/selftests/rcutorture/bin/torture.sh b/tools/testing/selftests/rcutorture/bin/torture.sh
index f614011..90ca736 100755
--- a/tools/testing/selftests/rcutorture/bin/torture.sh
+++ b/tools/testing/selftests/rcutorture/bin/torture.sh
@@ -174,10 +174,17 @@ do
 	shift
 done
 
+ds="`date +%Y.%m.%d-%H.%M.%S`-torture"
+startdate="`date`"
+starttime="`get_starttime`"
+
 T=/tmp/torture.sh.$$
 trap 'rm -rf $T' 0 2
 mkdir $T
 
+echo " --- " $scriptname $args | tee -a $T/log
+echo " --- Results directory: " $ds | tee -a $T/log
+
 # Calculate rcutorture defaults and apportion time
 if test -z "$configs_rcutorture"
 then
@@ -217,10 +224,6 @@ fi
 touch $T/failures
 touch $T/successes
 
-ds="`date +%Y.%m.%d-%H.%M.%S`-torture"
-startdate="`date`"
-starttime="`get_starttime`"
-
 # torture_one - Does a single kvm.sh run.
 #
 # Usage:
-- 
2.9.5

