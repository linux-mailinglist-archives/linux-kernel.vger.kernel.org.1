Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 82E0A2A8F2A
	for <lists+linux-kernel@lfdr.de>; Fri,  6 Nov 2020 07:09:44 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1726220AbgKFGJn (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 6 Nov 2020 01:09:43 -0500
Received: from Mailgw01.mediatek.com ([1.203.163.78]:37947 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1725830AbgKFGJm (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 6 Nov 2020 01:09:42 -0500
X-UUID: 793a92215b4f4329bd22f39392bf806f-20201106
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:References:In-Reply-To:Message-ID:Date:Subject:CC:To:From; bh=OkC91RHrEAwuDR5aenktw8038eTDIl+yp/i+2CQUCF0=;
        b=n2nyQJ20OJ+v1WjBlrb5qXhnaMF81neTtoImZGe3+YVjj4ym0g8E+97zIPU8p579aj/beIDara6+vs1nFWSbYLznrqUTI1DWNJ26nfYZ735v0z3fHRcPOyeEJRrXxQ4biCHmODv8gXpuq5bPYGDMoLHmfR9SKvJx7DCp2tiSeVg=;
X-UUID: 793a92215b4f4329bd22f39392bf806f-20201106
Received: from mtkcas32.mediatek.inc [(172.27.4.253)] by mailgw01.mediatek.com
        (envelope-from <chunfeng.yun@mediatek.com>)
        (mailgw01.mediatek.com ESMTP with TLSv1.2 ECDHE-RSA-AES256-SHA384 256/256)
        with ESMTP id 904508893; Fri, 06 Nov 2020 14:09:32 +0800
Received: from MTKCAS06.mediatek.inc (172.21.101.30) by
 MTKMBS31N2.mediatek.inc (172.27.4.87) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Fri, 6 Nov 2020 14:09:30 +0800
Received: from localhost.localdomain (10.17.3.153) by MTKCAS06.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Fri, 6 Nov 2020 14:09:29 +0800
From:   Chunfeng Yun <chunfeng.yun@mediatek.com>
To:     Kishon Vijay Abraham I <kishon@ti.com>,
        Vinod Koul <vkoul@kernel.org>
CC:     Maxime Ripard <mripard@kernel.org>, Chen-Yu Tsai <wens@csie.org>,
        Kevin Hilman <khilman@baylibre.com>,
        Neil Armstrong <narmstrong@baylibre.com>,
        Jerome Brunet <jbrunet@baylibre.com>,
        Martin Blumenstingl <martin.blumenstingl@googlemail.com>,
        Ray Jui <rjui@broadcom.com>,
        Scott Branden <sbranden@broadcom.com>,
        <bcm-kernel-feedback-list@broadcom.com>,
        Florian Fainelli <f.fainelli@gmail.com>,
        Shawn Guo <shawnguo@kernel.org>,
        Sascha Hauer <s.hauer@pengutronix.de>,
        Pengutronix Kernel Team <kernel@pengutronix.de>,
        Fabio Estevam <festevam@gmail.com>,
        NXP Linux Team <linux-imx@nxp.com>,
        Lubomir Rintel <lkundrak@v3.sk>,
        Chunfeng Yun <chunfeng.yun@mediatek.com>,
        Matthias Brugger <matthias.bgg@gmail.com>,
        Randy Dunlap <rdunlap@infradead.org>,
        Krzysztof Kozlowski <krzk@kernel.org>,
        Colin Ian King <colin.king@canonical.com>,
        Ondrej Jirman <megous@megous.com>,
        Rikard Falkeborn <rikard.falkeborn@gmail.com>,
        Icenowy Zheng <icenowy@aosc.io>,
        Remi Pommarel <repk@triplefau.lt>,
        Lorenzo Pieralisi <lorenzo.pieralisi@arm.com>,
        Yue Wang <yue.wang@amlogic.com>,
        Hanjie Lin <hanjie.lin@amlogic.com>,
        Joe Perches <joe@perches.com>,
        Bharat Gooty <bharat.gooty@broadcom.com>,
        Rayagonda Kokatanur <rayagonda.kokatanur@broadcom.com>,
        Peter Chen <peter.chen@nxp.com>, Roger Quadros <rogerq@ti.com>,
        Jyri Sarha <jsarha@ti.com>,
        Sanket Parmar <sparmar@cadence.com>,
        Anil Varughese <aniljoy@cadence.com>, Li Jun <jun.li@nxp.com>,
        Ma Feng <mafeng.ma@huawei.com>,
        Wei Yongjun <weiyongjun1@huawei.com>,
        <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        <linux-amlogic@lists.infradead.org>,
        <linux-mediatek@lists.infradead.org>,
        Al Cooper <alcooperx@gmail.com>
Subject: [PATCH v2 03/17] phy: broadcom: convert to devm_platform_ioremap_resource(_byname)
Date:   Fri, 6 Nov 2020 14:08:36 +0800
Message-ID: <1604642930-29019-3-git-send-email-chunfeng.yun@mediatek.com>
X-Mailer: git-send-email 1.8.1.1.dirty
In-Reply-To: <1604642930-29019-1-git-send-email-chunfeng.yun@mediatek.com>
References: <1604642930-29019-1-git-send-email-chunfeng.yun@mediatek.com>
MIME-Version: 1.0
Content-Type: text/plain
X-TM-SNTS-SMTP: EF44BC35A6FFD95A55DA63F7573A72845022EA6542E0EC12B5C8F67B5F2B36882000:8
X-MTK:  N
Content-Transfer-Encoding: base64
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

VXNlIGRldm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShfYnluYW1lKSB0byBzaW1wbGlmeSBj
b2RlDQoNCkNjOiBBbCBDb29wZXIgPGFsY29vcGVyeEBnbWFpbC5jb20+DQpTaWduZWQtb2ZmLWJ5
OiBDaHVuZmVuZyBZdW4gPGNodW5mZW5nLnl1bkBtZWRpYXRlay5jb20+DQpSZXZpZXdlZC1ieTog
RmxvcmlhbiBGYWluZWxsaSA8Zi5mYWluZWxsaUBnbWFpbC5jb20+DQotLS0NCnYyOiBhZGQgUmV2
aWV3ZWQtYnkgRmxvcmlhbg0KLS0tDQogZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1jeWdu
dXMtcGNpZS5jIHwgIDQgKy0tLQ0KIGRyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20ta29uYS11
c2IyLmMgICB8ICA0ICstLS0NCiBkcml2ZXJzL3BoeS9icm9hZGNvbS9waHktYmNtLW5zLXVzYjIu
YyAgICAgfCAgNCArLS0tDQogZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1ucy11c2IzLmMg
ICAgIHwgIDcgKystLS0tLQ0KIGRyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20tbnMyLXVzYmRy
ZC5jICB8IDEzICsrKystLS0tLS0tLS0NCiBkcml2ZXJzL3BoeS9icm9hZGNvbS9waHktYmNtLXNy
LXBjaWUuYyAgICAgfCAgNSArLS0tLQ0KIGRyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20tc3It
dXNiLmMgICAgICB8ICA0ICstLS0NCiBkcml2ZXJzL3BoeS9icm9hZGNvbS9waHktYnJjbS1zYXRh
LmMgICAgICAgfCAgOCArKy0tLS0tLQ0KIDggZmlsZXMgY2hhbmdlZCwgMTMgaW5zZXJ0aW9ucygr
KSwgMzYgZGVsZXRpb25zKC0pDQoNCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9icm9hZGNvbS9w
aHktYmNtLWN5Z251cy1wY2llLmMgYi9kcml2ZXJzL3BoeS9icm9hZGNvbS9waHktYmNtLWN5Z251
cy1wY2llLmMNCmluZGV4IGIwNzQ2ODJkOWRkOC4uNTQ4ZTQ2Nzc2MTAwIDEwMDY0NA0KLS0tIGEv
ZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1jeWdudXMtcGNpZS5jDQorKysgYi9kcml2ZXJz
L3BoeS9icm9hZGNvbS9waHktYmNtLWN5Z251cy1wY2llLmMNCkBAIC0xMjYsNyArMTI2LDYgQEAg
c3RhdGljIGludCBjeWdudXNfcGNpZV9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldikNCiAJc3RydWN0IGRldmljZV9ub2RlICpub2RlID0gZGV2LT5vZl9ub2RlLCAqY2hpbGQ7
DQogCXN0cnVjdCBjeWdudXNfcGNpZV9waHlfY29yZSAqY29yZTsNCiAJc3RydWN0IHBoeV9wcm92
aWRlciAqcHJvdmlkZXI7DQotCXN0cnVjdCByZXNvdXJjZSAqcmVzOw0KIAl1bnNpZ25lZCBjbnQg
PSAwOw0KIAlpbnQgcmV0Ow0KIA0KQEAgLTE0MSw4ICsxNDAsNyBAQCBzdGF0aWMgaW50IGN5Z251
c19wY2llX3BoeV9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQ0KIA0KIAljb3Jl
LT5kZXYgPSBkZXY7DQogDQotCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNvdXJjZShwZGV2LCBJT1JF
U09VUkNFX01FTSwgMCk7DQotCWNvcmUtPmJhc2UgPSBkZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2
LCByZXMpOw0KKwljb3JlLT5iYXNlID0gZGV2bV9wbGF0Zm9ybV9pb3JlbWFwX3Jlc291cmNlKHBk
ZXYsIDApOw0KIAlpZiAoSVNfRVJSKGNvcmUtPmJhc2UpKQ0KIAkJcmV0dXJuIFBUUl9FUlIoY29y
ZS0+YmFzZSk7DQogDQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1r
b25hLXVzYjIuYyBiL2RyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20ta29uYS11c2IyLmMNCmlu
ZGV4IDY0NTkyOTZkOWJmOS4uZTljYzVmMmNiODlhIDEwMDY0NA0KLS0tIGEvZHJpdmVycy9waHkv
YnJvYWRjb20vcGh5LWJjbS1rb25hLXVzYjIuYw0KKysrIGIvZHJpdmVycy9waHkvYnJvYWRjb20v
cGh5LWJjbS1rb25hLXVzYjIuYw0KQEAgLTk0LDcgKzk0LDYgQEAgc3RhdGljIGludCBiY21fa29u
YV91c2IyX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogew0KIAlzdHJ1Y3Qg
ZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2Ow0KIAlzdHJ1Y3QgYmNtX2tvbmFfdXNiICpwaHk7DQot
CXN0cnVjdCByZXNvdXJjZSAqcmVzOw0KIAlzdHJ1Y3QgcGh5ICpncGh5Ow0KIAlzdHJ1Y3QgcGh5
X3Byb3ZpZGVyICpwaHlfcHJvdmlkZXI7DQogDQpAQCAtMTAyLDggKzEwMSw3IEBAIHN0YXRpYyBp
bnQgYmNtX2tvbmFfdXNiMl9wcm9iZShzdHJ1Y3QgcGxhdGZvcm1fZGV2aWNlICpwZGV2KQ0KIAlp
ZiAoIXBoeSkNCiAJCXJldHVybiAtRU5PTUVNOw0KIA0KLQlyZXMgPSBwbGF0Zm9ybV9nZXRfcmVz
b3VyY2UocGRldiwgSU9SRVNPVVJDRV9NRU0sIDApOw0KLQlwaHktPnJlZ3MgPSBkZXZtX2lvcmVt
YXBfcmVzb3VyY2UoJnBkZXYtPmRldiwgcmVzKTsNCisJcGh5LT5yZWdzID0gZGV2bV9wbGF0Zm9y
bV9pb3JlbWFwX3Jlc291cmNlKHBkZXYsIDApOw0KIAlpZiAoSVNfRVJSKHBoeS0+cmVncykpDQog
CQlyZXR1cm4gUFRSX0VSUihwaHktPnJlZ3MpOw0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGh5
L2Jyb2FkY29tL3BoeS1iY20tbnMtdXNiMi5jIGIvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJj
bS1ucy11c2IyLmMNCmluZGV4IDlmMmY4NGQ2NWRjZC4uNGIwMTViOGE3MWMzIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1ucy11c2IyLmMNCisrKyBiL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1iY20tbnMtdXNiMi5jDQpAQCAtODMsNyArODMsNiBAQCBzdGF0aWMg
aW50IGJjbV9uc191c2IyX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogew0K
IAlzdHJ1Y3QgZGV2aWNlICpkZXYgPSAmcGRldi0+ZGV2Ow0KIAlzdHJ1Y3QgYmNtX25zX3VzYjIg
KnVzYjI7DQotCXN0cnVjdCByZXNvdXJjZSAqcmVzOw0KIAlzdHJ1Y3QgcGh5X3Byb3ZpZGVyICpw
aHlfcHJvdmlkZXI7DQogDQogCXVzYjIgPSBkZXZtX2t6YWxsb2MoJnBkZXYtPmRldiwgc2l6ZW9m
KCp1c2IyKSwgR0ZQX0tFUk5FTCk7DQpAQCAtOTEsOCArOTAsNyBAQCBzdGF0aWMgaW50IGJjbV9u
c191c2IyX3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogCQlyZXR1cm4gLUVO
T01FTTsNCiAJdXNiMi0+ZGV2ID0gZGV2Ow0KIA0KLQlyZXMgPSBwbGF0Zm9ybV9nZXRfcmVzb3Vy
Y2VfYnluYW1lKHBkZXYsIElPUkVTT1VSQ0VfTUVNLCAiZG11Iik7DQotCXVzYjItPmRtdSA9IGRl
dm1faW9yZW1hcF9yZXNvdXJjZShkZXYsIHJlcyk7DQorCXVzYjItPmRtdSA9IGRldm1fcGxhdGZv
cm1faW9yZW1hcF9yZXNvdXJjZV9ieW5hbWUocGRldiwgImRtdSIpOw0KIAlpZiAoSVNfRVJSKHVz
YjItPmRtdSkpIHsNCiAJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIG1hcCBETVUgcmVnc1xuIik7
DQogCQlyZXR1cm4gUFRSX0VSUih1c2IyLT5kbXUpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGh5
L2Jyb2FkY29tL3BoeS1iY20tbnMtdXNiMy5jIGIvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJj
bS1ucy11c2IzLmMNCmluZGV4IDQ3YjAyOWZiZWJiZC4uNDJiYWY0ZDZkZDVkIDEwMDY0NA0KLS0t
IGEvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1ucy11c2IzLmMNCisrKyBiL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1iY20tbnMtdXNiMy5jDQpAQCAtMzA1LDcgKzMwNSw2IEBAIHN0YXRp
YyBpbnQgYmNtX25zX3VzYjNfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAqcGRldikNCiAJ
c3RydWN0IGRldmljZSAqZGV2ID0gJnBkZXYtPmRldjsNCiAJY29uc3Qgc3RydWN0IG9mX2Rldmlj
ZV9pZCAqb2ZfaWQ7DQogCXN0cnVjdCBiY21fbnNfdXNiMyAqdXNiMzsNCi0Jc3RydWN0IHJlc291
cmNlICpyZXM7DQogCXN0cnVjdCBwaHlfcHJvdmlkZXIgKnBoeV9wcm92aWRlcjsNCiANCiAJdXNi
MyA9IGRldm1fa3phbGxvYyhkZXYsIHNpemVvZigqdXNiMyksIEdGUF9LRVJORUwpOw0KQEAgLTMx
OSwxNSArMzE4LDEzIEBAIHN0YXRpYyBpbnQgYmNtX25zX3VzYjNfcHJvYmUoc3RydWN0IHBsYXRm
b3JtX2RldmljZSAqcGRldikNCiAJCXJldHVybiAtRUlOVkFMOw0KIAl1c2IzLT5mYW1pbHkgPSAo
ZW51bSBiY21fbnNfZmFtaWx5KW9mX2lkLT5kYXRhOw0KIA0KLQlyZXMgPSBwbGF0Zm9ybV9nZXRf
cmVzb3VyY2VfYnluYW1lKHBkZXYsIElPUkVTT1VSQ0VfTUVNLCAiZG1wIik7DQotCXVzYjMtPmRt
cCA9IGRldm1faW9yZW1hcF9yZXNvdXJjZShkZXYsIHJlcyk7DQorCXVzYjMtPmRtcCA9IGRldm1f
cGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZV9ieW5hbWUocGRldiwgImRtcCIpOw0KIAlpZiAoSVNf
RVJSKHVzYjMtPmRtcCkpIHsNCiAJCWRldl9lcnIoZGV2LCAiRmFpbGVkIHRvIG1hcCBETVAgcmVn
c1xuIik7DQogCQlyZXR1cm4gUFRSX0VSUih1c2IzLT5kbXApOw0KIAl9DQogDQotCXJlcyA9IHBs
YXRmb3JtX2dldF9yZXNvdXJjZV9ieW5hbWUocGRldiwgSU9SRVNPVVJDRV9NRU0sICJjY2ItbWlp
Iik7DQotCXVzYjMtPmNjYl9taWkgPSBkZXZtX2lvcmVtYXBfcmVzb3VyY2UoZGV2LCByZXMpOw0K
Kwl1c2IzLT5jY2JfbWlpID0gZGV2bV9wbGF0Zm9ybV9pb3JlbWFwX3Jlc291cmNlX2J5bmFtZShw
ZGV2LCAiY2NiLW1paSIpOw0KIAlpZiAoSVNfRVJSKHVzYjMtPmNjYl9taWkpKSB7DQogCQlkZXZf
ZXJyKGRldiwgIkZhaWxlZCB0byBtYXAgQ2hpcENvbW1vbiBCIE1JSSByZWdzXG4iKTsNCiAJCXJl
dHVybiBQVFJfRVJSKHVzYjMtPmNjYl9taWkpOw0KZGlmZiAtLWdpdCBhL2RyaXZlcnMvcGh5L2Jy
b2FkY29tL3BoeS1iY20tbnMyLXVzYmRyZC5jIGIvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJj
bS1uczItdXNiZHJkLmMNCmluZGV4IDk2MzBhYzEyNzM2Ni4uNjVhMzk5YWNjODQ1IDEwMDY0NA0K
LS0tIGEvZHJpdmVycy9waHkvYnJvYWRjb20vcGh5LWJjbS1uczItdXNiZHJkLmMNCisrKyBiL2Ry
aXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20tbnMyLXVzYmRyZC5jDQpAQCAtMjkzLDcgKzI5Myw2
IEBAIHN0YXRpYyBpbnQgbnMyX2RyZF9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2RldmljZSAq
cGRldikNCiAJc3RydWN0IGRldmljZSAqZGV2ID0gJnBkZXYtPmRldjsNCiAJc3RydWN0IG5zMl9w
aHlfZHJpdmVyICpkcml2ZXI7DQogCXN0cnVjdCBuczJfcGh5X2RhdGEgKmRhdGE7DQotCXN0cnVj
dCByZXNvdXJjZSAqcmVzOw0KIAlpbnQgcmV0Ow0KIAl1MzIgdmFsOw0KIA0KQEAgLTMwNywyMyAr
MzA2LDE5IEBAIHN0YXRpYyBpbnQgbnMyX2RyZF9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikNCiAJaWYgKCFkcml2ZXItPmRhdGEpDQogCQlyZXR1cm4gLUVOT01FTTsNCiAN
Ci0JcmVzID0gcGxhdGZvcm1fZ2V0X3Jlc291cmNlX2J5bmFtZShwZGV2LCBJT1JFU09VUkNFX01F
TSwgImljZmciKTsNCi0JZHJpdmVyLT5pY2ZnZHJkX3JlZ3MgPSBkZXZtX2lvcmVtYXBfcmVzb3Vy
Y2UoZGV2LCByZXMpOw0KKwlkcml2ZXItPmljZmdkcmRfcmVncyA9IGRldm1fcGxhdGZvcm1faW9y
ZW1hcF9yZXNvdXJjZV9ieW5hbWUocGRldiwgImljZmciKTsNCiAJaWYgKElTX0VSUihkcml2ZXIt
PmljZmdkcmRfcmVncykpDQogCQlyZXR1cm4gUFRSX0VSUihkcml2ZXItPmljZmdkcmRfcmVncyk7
DQogDQotCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNvdXJjZV9ieW5hbWUocGRldiwgSU9SRVNPVVJD
RV9NRU0sICJyc3QtY3RybCIpOw0KLQlkcml2ZXItPmlkbWRyZF9yc3RfY3RybCA9IGRldm1faW9y
ZW1hcF9yZXNvdXJjZShkZXYsIHJlcyk7DQorCWRyaXZlci0+aWRtZHJkX3JzdF9jdHJsID0gZGV2
bV9wbGF0Zm9ybV9pb3JlbWFwX3Jlc291cmNlX2J5bmFtZShwZGV2LCAicnN0LWN0cmwiKTsNCiAJ
aWYgKElTX0VSUihkcml2ZXItPmlkbWRyZF9yc3RfY3RybCkpDQogCQlyZXR1cm4gUFRSX0VSUihk
cml2ZXItPmlkbWRyZF9yc3RfY3RybCk7DQogDQotCXJlcyA9IHBsYXRmb3JtX2dldF9yZXNvdXJj
ZV9ieW5hbWUocGRldiwgSU9SRVNPVVJDRV9NRU0sICJjcm11LWN0cmwiKTsNCi0JZHJpdmVyLT5j
cm11X3VzYjJfY3RybCA9IGRldm1faW9yZW1hcF9yZXNvdXJjZShkZXYsIHJlcyk7DQorCWRyaXZl
ci0+Y3JtdV91c2IyX2N0cmwgPSBkZXZtX3BsYXRmb3JtX2lvcmVtYXBfcmVzb3VyY2VfYnluYW1l
KHBkZXYsICJjcm11LWN0cmwiKTsNCiAJaWYgKElTX0VSUihkcml2ZXItPmNybXVfdXNiMl9jdHJs
KSkNCiAJCXJldHVybiBQVFJfRVJSKGRyaXZlci0+Y3JtdV91c2IyX2N0cmwpOw0KIA0KLQlyZXMg
PSBwbGF0Zm9ybV9nZXRfcmVzb3VyY2VfYnluYW1lKHBkZXYsIElPUkVTT1VSQ0VfTUVNLCAidXNi
Mi1zdHJhcCIpOw0KLQlkcml2ZXItPnVzYjJoX3N0cmFwX3JlZyA9IGRldm1faW9yZW1hcF9yZXNv
dXJjZShkZXYsIHJlcyk7DQorCWRyaXZlci0+dXNiMmhfc3RyYXBfcmVnID0gZGV2bV9wbGF0Zm9y
bV9pb3JlbWFwX3Jlc291cmNlX2J5bmFtZShwZGV2LCAidXNiMi1zdHJhcCIpOw0KIAlpZiAoSVNf
RVJSKGRyaXZlci0+dXNiMmhfc3RyYXBfcmVnKSkNCiAJCXJldHVybiBQVFJfRVJSKGRyaXZlci0+
dXNiMmhfc3RyYXBfcmVnKTsNCiANCmRpZmYgLS1naXQgYS9kcml2ZXJzL3BoeS9icm9hZGNvbS9w
aHktYmNtLXNyLXBjaWUuYyBiL2RyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20tc3ItcGNpZS5j
DQppbmRleCA5NmEzYWYxMjZhNzguLjhhNGFhZGYxNjZjZiAxMDA2NDQNCi0tLSBhL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1iY20tc3ItcGNpZS5jDQorKysgYi9kcml2ZXJzL3BoeS9icm9hZGNv
bS9waHktYmNtLXNyLXBjaWUuYw0KQEAgLTIxNyw3ICsyMTcsNiBAQCBzdGF0aWMgaW50IHNyX3Bj
aWVfcGh5X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogCXN0cnVjdCBkZXZp
Y2UgKmRldiA9ICZwZGV2LT5kZXY7DQogCXN0cnVjdCBkZXZpY2Vfbm9kZSAqbm9kZSA9IGRldi0+
b2Zfbm9kZTsNCiAJc3RydWN0IHNyX3BjaWVfcGh5X2NvcmUgKmNvcmU7DQotCXN0cnVjdCByZXNv
dXJjZSAqcmVzOw0KIAlzdHJ1Y3QgcGh5X3Byb3ZpZGVyICpwcm92aWRlcjsNCiAJdW5zaWduZWQg
aW50IHBoeV9pZHggPSAwOw0KIA0KQEAgLTIyNiw5ICsyMjUsNyBAQCBzdGF0aWMgaW50IHNyX3Bj
aWVfcGh5X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQogCQlyZXR1cm4gLUVO
T01FTTsNCiANCiAJY29yZS0+ZGV2ID0gZGV2Ow0KLQ0KLQlyZXMgPSBwbGF0Zm9ybV9nZXRfcmVz
b3VyY2UocGRldiwgSU9SRVNPVVJDRV9NRU0sIDApOw0KLQljb3JlLT5iYXNlID0gZGV2bV9pb3Jl
bWFwX3Jlc291cmNlKGNvcmUtPmRldiwgcmVzKTsNCisJY29yZS0+YmFzZSA9IGRldm1fcGxhdGZv
cm1faW9yZW1hcF9yZXNvdXJjZShwZGV2LCAwKTsNCiAJaWYgKElTX0VSUihjb3JlLT5iYXNlKSkN
CiAJCXJldHVybiBQVFJfRVJSKGNvcmUtPmJhc2UpOw0KIA0KZGlmZiAtLWdpdCBhL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1iY20tc3ItdXNiLmMgYi9kcml2ZXJzL3BoeS9icm9hZGNvbS9waHkt
YmNtLXNyLXVzYi5jDQppbmRleCBjM2U5OWFkMTc0ODcuLjAwMDJkYTNiNWI1ZCAxMDA2NDQNCi0t
LSBhL2RyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1iY20tc3ItdXNiLmMNCisrKyBiL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1iY20tc3ItdXNiLmMNCkBAIC0zMDAsMTQgKzMwMCwxMiBAQCBzdGF0
aWMgaW50IGJjbV91c2JfcGh5X3Byb2JlKHN0cnVjdCBwbGF0Zm9ybV9kZXZpY2UgKnBkZXYpDQog
CXN0cnVjdCBkZXZpY2UgKmRldiA9ICZwZGV2LT5kZXY7DQogCXN0cnVjdCBkZXZpY2Vfbm9kZSAq
ZG4gPSBkZXYtPm9mX25vZGU7DQogCWNvbnN0IHN0cnVjdCBvZl9kZXZpY2VfaWQgKm9mX2lkOw0K
LQlzdHJ1Y3QgcmVzb3VyY2UgKnJlczsNCiAJdm9pZCBfX2lvbWVtICpyZWdzOw0KIAlpbnQgcmV0
Ow0KIAllbnVtIGJjbV91c2JfcGh5X3ZlcnNpb24gdmVyc2lvbjsNCiAJc3RydWN0IHBoeV9wcm92
aWRlciAqcGh5X3Byb3ZpZGVyOw0KIA0KLQlyZXMgPSBwbGF0Zm9ybV9nZXRfcmVzb3VyY2UocGRl
diwgSU9SRVNPVVJDRV9NRU0sIDApOw0KLQlyZWdzID0gZGV2bV9pb3JlbWFwX3Jlc291cmNlKGRl
diwgcmVzKTsNCisJcmVncyA9IGRldm1fcGxhdGZvcm1faW9yZW1hcF9yZXNvdXJjZShwZGV2LCAw
KTsNCiAJaWYgKElTX0VSUihyZWdzKSkNCiAJCXJldHVybiBQVFJfRVJSKHJlZ3MpOw0KIA0KZGlm
ZiAtLWdpdCBhL2RyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1icmNtLXNhdGEuYyBiL2RyaXZlcnMv
cGh5L2Jyb2FkY29tL3BoeS1icmNtLXNhdGEuYw0KaW5kZXggMTgyNTFmMjMyMTcyLi41Mzk0Mjk3
M2Y1MDggMTAwNjQ0DQotLS0gYS9kcml2ZXJzL3BoeS9icm9hZGNvbS9waHktYnJjbS1zYXRhLmMN
CisrKyBiL2RyaXZlcnMvcGh5L2Jyb2FkY29tL3BoeS1icmNtLXNhdGEuYw0KQEAgLTcyNiw3ICs3
MjYsNiBAQCBzdGF0aWMgaW50IGJyY21fc2F0YV9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikNCiAJc3RydWN0IGRldmljZV9ub2RlICpkbiA9IGRldi0+b2Zfbm9kZSwgKmNo
aWxkOw0KIAljb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkICpvZl9pZDsNCiAJc3RydWN0IGJyY21f
c2F0YV9waHkgKnByaXY7DQotCXN0cnVjdCByZXNvdXJjZSAqcmVzOw0KIAlzdHJ1Y3QgcGh5X3By
b3ZpZGVyICpwcm92aWRlcjsNCiAJaW50IHJldCwgY291bnQgPSAwOw0KIA0KQEAgLTczOSw4ICs3
MzgsNyBAQCBzdGF0aWMgaW50IGJyY21fc2F0YV9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikNCiAJZGV2X3NldF9kcnZkYXRhKGRldiwgcHJpdik7DQogCXByaXYtPmRldiA9
IGRldjsNCiANCi0JcmVzID0gcGxhdGZvcm1fZ2V0X3Jlc291cmNlX2J5bmFtZShwZGV2LCBJT1JF
U09VUkNFX01FTSwgInBoeSIpOw0KLQlwcml2LT5waHlfYmFzZSA9IGRldm1faW9yZW1hcF9yZXNv
dXJjZShkZXYsIHJlcyk7DQorCXByaXYtPnBoeV9iYXNlID0gZGV2bV9wbGF0Zm9ybV9pb3JlbWFw
X3Jlc291cmNlX2J5bmFtZShwZGV2LCAicGh5Iik7DQogCWlmIChJU19FUlIocHJpdi0+cGh5X2Jh
c2UpKQ0KIAkJcmV0dXJuIFBUUl9FUlIocHJpdi0+cGh5X2Jhc2UpOw0KIA0KQEAgLTc1MSw5ICs3
NDksNyBAQCBzdGF0aWMgaW50IGJyY21fc2F0YV9waHlfcHJvYmUoc3RydWN0IHBsYXRmb3JtX2Rl
dmljZSAqcGRldikNCiAJCXByaXYtPnZlcnNpb24gPSBCUkNNX1NBVEFfUEhZX1NUQl8yOE5NOw0K
IA0KIAlpZiAocHJpdi0+dmVyc2lvbiA9PSBCUkNNX1NBVEFfUEhZX0lQUk9DX05TMikgew0KLQkJ
cmVzID0gcGxhdGZvcm1fZ2V0X3Jlc291cmNlX2J5bmFtZShwZGV2LCBJT1JFU09VUkNFX01FTSwN
Ci0JCQkJCQkgICAicGh5LWN0cmwiKTsNCi0JCXByaXYtPmN0cmxfYmFzZSA9IGRldm1faW9yZW1h
cF9yZXNvdXJjZShkZXYsIHJlcyk7DQorCQlwcml2LT5jdHJsX2Jhc2UgPSBkZXZtX3BsYXRmb3Jt
X2lvcmVtYXBfcmVzb3VyY2VfYnluYW1lKHBkZXYsICJwaHktY3RybCIpOw0KIAkJaWYgKElTX0VS
Uihwcml2LT5jdHJsX2Jhc2UpKQ0KIAkJCXJldHVybiBQVFJfRVJSKHByaXYtPmN0cmxfYmFzZSk7
DQogCX0NCi0tIA0KMi4xOC4wDQo=

