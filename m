Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 3999821BACA
	for <lists+linux-kernel@lfdr.de>; Fri, 10 Jul 2020 18:24:57 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1728003AbgGJQYt (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 10 Jul 2020 12:24:49 -0400
Received: from mailgw01.mediatek.com ([210.61.82.183]:45935 "EHLO
        mailgw01.mediatek.com" rhost-flags-OK-FAIL-OK-FAIL) by vger.kernel.org
        with ESMTP id S1726965AbgGJQYt (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 10 Jul 2020 12:24:49 -0400
X-UUID: 543728e5eb50429a969e6674135db85c-20200711
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed; d=mediatek.com; s=dk;
        h=Content-Transfer-Encoding:Content-Type:MIME-Version:Message-ID:Date:Subject:CC:To:From; bh=iH5RBlxT314lzARGs6E+KkYkUlCI9LnoDlSewywGu1s=;
        b=sFXETMKS8mbO+URUYEKycI3G1Rh990HEHBD6G7lvnpYAaaRVPsvCWEXOkw9x5l/03rBRmd0UB8ylitQljjax0JK+EEqbCMpr23XVapeNXa6W0TXNtDbUqs1Cc5OC6HpROxY9DjJI1Q1WlewD5fAI9IuT5eT5P6dpZACeSgmlZ0o=;
X-UUID: 543728e5eb50429a969e6674135db85c-20200711
Received: from mtkexhb02.mediatek.inc [(172.21.101.103)] by mailgw01.mediatek.com
        (envelope-from <walter-zh.wu@mediatek.com>)
        (Cellopoint E-mail Firewall v4.1.10 Build 0809 with TLS)
        with ESMTP id 401719224; Sat, 11 Jul 2020 00:24:44 +0800
Received: from mtkcas07.mediatek.inc (172.21.101.84) by
 mtkmbs01n2.mediatek.inc (172.21.101.79) with Microsoft SMTP Server (TLS) id
 15.0.1497.2; Sat, 11 Jul 2020 00:24:42 +0800
Received: from mtksdccf07.mediatek.inc (172.21.84.99) by mtkcas07.mediatek.inc
 (172.21.101.73) with Microsoft SMTP Server id 15.0.1497.2 via Frontend
 Transport; Sat, 11 Jul 2020 00:24:42 +0800
From:   Walter Wu <walter-zh.wu@mediatek.com>
To:     Andrew Morton <akpm@linux-foundation.org>
CC:     Andrey Ryabinin <aryabinin@virtuozzo.com>,
        Alexander Potapenko <glider@google.com>,
        Dmitry Vyukov <dvyukov@google.com>,
        Matthias Brugger <matthias.bgg@gmail.com>,
        Andrey Konovalov <andreyknvl@google.com>, <linux-mm@kvack.org>,
        <linux-kernel@vger.kernel.org>,
        <linux-arm-kernel@lists.infradead.org>,
        wsd_upstream <wsd_upstream@mediatek.com>,
        <linux-mediatek@lists.infradead.org>,
        Walter Wu <walter-zh.wu@mediatek.com>
Subject: [PATCH v8 2/4] kasan: record and print the free track
Date:   Sat, 11 Jul 2020 00:24:40 +0800
Message-ID: <20200710162440.23887-1-walter-zh.wu@mediatek.com>
X-Mailer: git-send-email 2.18.0
MIME-Version: 1.0
Content-Type: text/plain
X-TM-SNTS-SMTP: 722A27136CAADEBD4C2E5DF963CFB6288BE4921EAB311698829C2514C73D0DC62000:8
X-MTK:  N
Content-Transfer-Encoding: base64
Sender: linux-kernel-owner@vger.kernel.org
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

TW92ZSBmcmVlIHRyYWNrIGZyb20ga2FzYW5fYWxsb2NfbWV0YSB0byBrYXNhbl9mcmVlX21ldGEg
aW4gb3JkZXINCnRvIG1ha2Ugc3RydWN0IGthc2FuX2FsbG9jX21ldGEgYW5kIGthc2FuX2ZyZWVf
bWV0YSBzaXplIGFyZSBib3RoDQoxNiBieXRlcy4gSXQgaXMgYSBnb29kIHNpemUgYmVjYXVzZSBp
dCBpcyB0aGUgbWluaW1hbCByZWR6b25lIHNpemUNCmFuZCBhIGdvb2QgbnVtYmVyIG9mIGFsaWdu
bWVudC4NCg0KRm9yIGZyZWUgdHJhY2ssIHdlIG1ha2Ugc29tZSBtb2RpZmljYXRpb25zIGFzIHNo
b3duIGJlbG93Og0KMSkgUmVtb3ZlIHRoZSBmcmVlX3RyYWNrIGZyb20gc3RydWN0IGthc2FuX2Fs
bG9jX21ldGEuDQoyKSBBZGQgdGhlIGZyZWVfdHJhY2sgaW50byBzdHJ1Y3Qga2FzYW5fZnJlZV9t
ZXRhLg0KMykgQWRkIGEgbWFjcm8gS0FTQU5fS01BTExPQ19GUkVFVFJBQ0sgaW4gb3JkZXIgdG8g
Y2hlY2sgd2hldGhlcg0KICAgaXQgY2FuIHByaW50IGZyZWUgc3RhY2sgaW4gS0FTQU4gcmVwb3J0
Lg0KDQpbMV1odHRwczovL2J1Z3ppbGxhLmtlcm5lbC5vcmcvc2hvd19idWcuY2dpP2lkPTE5ODQz
Nw0KDQpTaWduZWQtb2ZmLWJ5OiBXYWx0ZXIgV3UgPHdhbHRlci16aC53dUBtZWRpYXRlay5jb20+
DQpTdWdnZXN0ZWQtYnk6IERtaXRyeSBWeXVrb3YgPGR2eXVrb3ZAZ29vZ2xlLmNvbT4NCkNvLWRl
dmVsb3BlZC1ieTogRG1pdHJ5IFZ5dWtvdiA8ZHZ5dWtvdkBnb29nbGUuY29tPg0KUmV2aWV3ZWQt
YW5kLXRlc3RlZC1ieTogRG1pdHJ5IFZ5dWtvdiA8ZHZ5dWtvdkBnb29nbGUuY29tPg0KUmV2aWV3
ZWQtYnk6IEFuZHJleSBLb25vdmFsb3YgPGFuZHJleWtudmxAZ29vZ2xlLmNvbT4NCkNjOiBBbmRy
ZXkgUnlhYmluaW4gPGFyeWFiaW5pbkB2aXJ0dW96em8uY29tPg0KQ2M6IEFsZXhhbmRlciBQb3Rh
cGVua28gPGdsaWRlckBnb29nbGUuY29tPg0KLS0tDQoNCkNoYW5nZXMgc2luY2Ugdjc6DQotIGZp
eCB0aGlzIGNvbW1pdCBkZXBlbmRlbmNlIGluIHRoZSBzZXJpZXMNCg0KLS0tDQogbW0va2FzYW4v
Y29tbW9uLmMgICAgICAgICB8IDIyICsrLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiBtbS9rYXNhbi9n
ZW5lcmljLmMgICAgICAgIHwgMjIgKysrKysrKysrKysrKysrKysrKysrKw0KIG1tL2thc2FuL2dl
bmVyaWNfcmVwb3J0LmMgfCAgMSArDQogbW0va2FzYW4va2FzYW4uaCAgICAgICAgICB8IDE2ICsr
KysrKysrKysrKystLS0NCiBtbS9rYXNhbi9xdWFyYW50aW5lLmMgICAgIHwgIDEgKw0KIG1tL2th
c2FuL3JlcG9ydC5jICAgICAgICAgfCAyNiArKysrLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KIG1t
L2thc2FuL3RhZ3MuYyAgICAgICAgICAgfCAzNyArKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrDQogNyBmaWxlcyBjaGFuZ2VkLCA4MCBpbnNlcnRpb25zKCspLCA0NSBkZWxldGlv
bnMoLSkNCg0KZGlmZiAtLWdpdCBhL21tL2thc2FuL2NvbW1vbi5jIGIvbW0va2FzYW4vY29tbW9u
LmMNCmluZGV4IDhiYzYxODI4OWJiMS4uNDdiNTM5MTJmMzIyIDEwMDY0NA0KLS0tIGEvbW0va2Fz
YW4vY29tbW9uLmMNCisrKyBiL21tL2thc2FuL2NvbW1vbi5jDQpAQCAtNTEsNyArNTEsNyBAQCBk
ZXBvdF9zdGFja19oYW5kbGVfdCBrYXNhbl9zYXZlX3N0YWNrKGdmcF90IGZsYWdzKQ0KIAlyZXR1
cm4gc3RhY2tfZGVwb3Rfc2F2ZShlbnRyaWVzLCBucl9lbnRyaWVzLCBmbGFncyk7DQogfQ0KIA0K
LXN0YXRpYyBpbmxpbmUgdm9pZCBzZXRfdHJhY2soc3RydWN0IGthc2FuX3RyYWNrICp0cmFjaywg
Z2ZwX3QgZmxhZ3MpDQordm9pZCBrYXNhbl9zZXRfdHJhY2soc3RydWN0IGthc2FuX3RyYWNrICp0
cmFjaywgZ2ZwX3QgZmxhZ3MpDQogew0KIAl0cmFjay0+cGlkID0gY3VycmVudC0+cGlkOw0KIAl0
cmFjay0+c3RhY2sgPSBrYXNhbl9zYXZlX3N0YWNrKGZsYWdzKTsNCkBAIC0yOTksMjQgKzI5OSw2
IEBAIHN0cnVjdCBrYXNhbl9mcmVlX21ldGEgKmdldF9mcmVlX2luZm8oc3RydWN0IGttZW1fY2Fj
aGUgKmNhY2hlLA0KIAlyZXR1cm4gKHZvaWQgKilvYmplY3QgKyBjYWNoZS0+a2FzYW5faW5mby5m
cmVlX21ldGFfb2Zmc2V0Ow0KIH0NCiANCi0NCi1zdGF0aWMgdm9pZCBrYXNhbl9zZXRfZnJlZV9p
bmZvKHN0cnVjdCBrbWVtX2NhY2hlICpjYWNoZSwNCi0JCXZvaWQgKm9iamVjdCwgdTggdGFnKQ0K
LXsNCi0Jc3RydWN0IGthc2FuX2FsbG9jX21ldGEgKmFsbG9jX21ldGE7DQotCXU4IGlkeCA9IDA7
DQotDQotCWFsbG9jX21ldGEgPSBnZXRfYWxsb2NfaW5mbyhjYWNoZSwgb2JqZWN0KTsNCi0NCi0j
aWZkZWYgQ09ORklHX0tBU0FOX1NXX1RBR1NfSURFTlRJRlkNCi0JaWR4ID0gYWxsb2NfbWV0YS0+
ZnJlZV90cmFja19pZHg7DQotCWFsbG9jX21ldGEtPmZyZWVfcG9pbnRlcl90YWdbaWR4XSA9IHRh
ZzsNCi0JYWxsb2NfbWV0YS0+ZnJlZV90cmFja19pZHggPSAoaWR4ICsgMSkgJSBLQVNBTl9OUl9G
UkVFX1NUQUNLUzsNCi0jZW5kaWYNCi0NCi0Jc2V0X3RyYWNrKCZhbGxvY19tZXRhLT5mcmVlX3Ry
YWNrW2lkeF0sIEdGUF9OT1dBSVQpOw0KLX0NCi0NCiB2b2lkIGthc2FuX3BvaXNvbl9zbGFiKHN0
cnVjdCBwYWdlICpwYWdlKQ0KIHsNCiAJdW5zaWduZWQgbG9uZyBpOw0KQEAgLTQ5Miw3ICs0NzQs
NyBAQCBzdGF0aWMgdm9pZCAqX19rYXNhbl9rbWFsbG9jKHN0cnVjdCBrbWVtX2NhY2hlICpjYWNo
ZSwgY29uc3Qgdm9pZCAqb2JqZWN0LA0KIAkJS0FTQU5fS01BTExPQ19SRURaT05FKTsNCiANCiAJ
aWYgKGNhY2hlLT5mbGFncyAmIFNMQUJfS0FTQU4pDQotCQlzZXRfdHJhY2soJmdldF9hbGxvY19p
bmZvKGNhY2hlLCBvYmplY3QpLT5hbGxvY190cmFjaywgZmxhZ3MpOw0KKwkJa2FzYW5fc2V0X3Ry
YWNrKCZnZXRfYWxsb2NfaW5mbyhjYWNoZSwgb2JqZWN0KS0+YWxsb2NfdHJhY2ssIGZsYWdzKTsN
CiANCiAJcmV0dXJuIHNldF90YWcob2JqZWN0LCB0YWcpOw0KIH0NCmRpZmYgLS1naXQgYS9tbS9r
YXNhbi9nZW5lcmljLmMgYi9tbS9rYXNhbi9nZW5lcmljLmMNCmluZGV4IDhhY2Y0ODg4MmJhMi4u
NGIzY2JhZDc0MzFiIDEwMDY0NA0KLS0tIGEvbW0va2FzYW4vZ2VuZXJpYy5jDQorKysgYi9tbS9r
YXNhbi9nZW5lcmljLmMNCkBAIC0zNDYsMyArMzQ2LDI1IEBAIHZvaWQga2FzYW5fcmVjb3JkX2F1
eF9zdGFjayh2b2lkICphZGRyKQ0KIAlhbGxvY19pbmZvLT5hdXhfc3RhY2tbMV0gPSBhbGxvY19p
bmZvLT5hdXhfc3RhY2tbMF07DQogCWFsbG9jX2luZm8tPmF1eF9zdGFja1swXSA9IGthc2FuX3Nh
dmVfc3RhY2soR0ZQX05PV0FJVCk7DQogfQ0KKw0KK3ZvaWQga2FzYW5fc2V0X2ZyZWVfaW5mbyhz
dHJ1Y3Qga21lbV9jYWNoZSAqY2FjaGUsDQorCQkJCXZvaWQgKm9iamVjdCwgdTggdGFnKQ0KK3sN
CisJc3RydWN0IGthc2FuX2ZyZWVfbWV0YSAqZnJlZV9tZXRhOw0KKw0KKwlmcmVlX21ldGEgPSBn
ZXRfZnJlZV9pbmZvKGNhY2hlLCBvYmplY3QpOw0KKwlrYXNhbl9zZXRfdHJhY2soJmZyZWVfbWV0
YS0+ZnJlZV90cmFjaywgR0ZQX05PV0FJVCk7DQorDQorCS8qDQorCSAqICB0aGUgb2JqZWN0IHdh
cyBmcmVlZCBhbmQgaGFzIGZyZWUgdHJhY2sgc2V0DQorCSAqLw0KKwkqKHU4ICopa2FzYW5fbWVt
X3RvX3NoYWRvdyhvYmplY3QpID0gS0FTQU5fS01BTExPQ19GUkVFVFJBQ0s7DQorfQ0KKw0KK3N0
cnVjdCBrYXNhbl90cmFjayAqa2FzYW5fZ2V0X2ZyZWVfdHJhY2soc3RydWN0IGttZW1fY2FjaGUg
KmNhY2hlLA0KKwkJCQl2b2lkICpvYmplY3QsIHU4IHRhZykNCit7DQorCWlmICgqKHU4ICopa2Fz
YW5fbWVtX3RvX3NoYWRvdyhvYmplY3QpICE9IEtBU0FOX0tNQUxMT0NfRlJFRVRSQUNLKQ0KKwkJ
cmV0dXJuIE5VTEw7DQorCXJldHVybiAmZ2V0X2ZyZWVfaW5mbyhjYWNoZSwgb2JqZWN0KS0+ZnJl
ZV90cmFjazsNCit9DQpkaWZmIC0tZ2l0IGEvbW0va2FzYW4vZ2VuZXJpY19yZXBvcnQuYyBiL21t
L2thc2FuL2dlbmVyaWNfcmVwb3J0LmMNCmluZGV4IGUyMDBhY2IyZDI5Mi4uYTM4YzdhOWUxOTJh
IDEwMDY0NA0KLS0tIGEvbW0va2FzYW4vZ2VuZXJpY19yZXBvcnQuYw0KKysrIGIvbW0va2FzYW4v
Z2VuZXJpY19yZXBvcnQuYw0KQEAgLTgwLDYgKzgwLDcgQEAgc3RhdGljIGNvbnN0IGNoYXIgKmdl
dF9zaGFkb3dfYnVnX3R5cGUoc3RydWN0IGthc2FuX2FjY2Vzc19pbmZvICppbmZvKQ0KIAkJYnJl
YWs7DQogCWNhc2UgS0FTQU5fRlJFRV9QQUdFOg0KIAljYXNlIEtBU0FOX0tNQUxMT0NfRlJFRToN
CisJY2FzZSBLQVNBTl9LTUFMTE9DX0ZSRUVUUkFDSzoNCiAJCWJ1Z190eXBlID0gInVzZS1hZnRl
ci1mcmVlIjsNCiAJCWJyZWFrOw0KIAljYXNlIEtBU0FOX0FMTE9DQV9MRUZUOg0KZGlmZiAtLWdp
dCBhL21tL2thc2FuL2thc2FuLmggYi9tbS9rYXNhbi9rYXNhbi5oDQppbmRleCBiMWE4OGM3NTQx
NmEuLmVmNjU1YTFjNmUxNSAxMDA2NDQNCi0tLSBhL21tL2thc2FuL2thc2FuLmgNCisrKyBiL21t
L2thc2FuL2thc2FuLmgNCkBAIC0xNywxNSArMTcsMTcgQEANCiAjZGVmaW5lIEtBU0FOX1BBR0Vf
UkVEWk9ORSAgICAgIDB4RkUgIC8qIHJlZHpvbmUgZm9yIGttYWxsb2NfbGFyZ2UgYWxsb2NhdGlv
bnMgKi8NCiAjZGVmaW5lIEtBU0FOX0tNQUxMT0NfUkVEWk9ORSAgIDB4RkMgIC8qIHJlZHpvbmUg
aW5zaWRlIHNsdWIgb2JqZWN0ICovDQogI2RlZmluZSBLQVNBTl9LTUFMTE9DX0ZSRUUgICAgICAw
eEZCICAvKiBvYmplY3Qgd2FzIGZyZWVkIChrbWVtX2NhY2hlX2ZyZWUva2ZyZWUpICovDQorI2Rl
ZmluZSBLQVNBTl9LTUFMTE9DX0ZSRUVUUkFDSyAweEZBICAvKiBvYmplY3Qgd2FzIGZyZWVkIGFu
ZCBoYXMgZnJlZSB0cmFjayBzZXQgKi8NCiAjZWxzZQ0KICNkZWZpbmUgS0FTQU5fRlJFRV9QQUdF
ICAgICAgICAgS0FTQU5fVEFHX0lOVkFMSUQNCiAjZGVmaW5lIEtBU0FOX1BBR0VfUkVEWk9ORSAg
ICAgIEtBU0FOX1RBR19JTlZBTElEDQogI2RlZmluZSBLQVNBTl9LTUFMTE9DX1JFRFpPTkUgICBL
QVNBTl9UQUdfSU5WQUxJRA0KICNkZWZpbmUgS0FTQU5fS01BTExPQ19GUkVFICAgICAgS0FTQU5f
VEFHX0lOVkFMSUQNCisjZGVmaW5lIEtBU0FOX0tNQUxMT0NfRlJFRVRSQUNLIEtBU0FOX1RBR19J
TlZBTElEDQogI2VuZGlmDQogDQotI2RlZmluZSBLQVNBTl9HTE9CQUxfUkVEWk9ORSAgICAweEZB
ICAvKiByZWR6b25lIGZvciBnbG9iYWwgdmFyaWFibGUgKi8NCi0jZGVmaW5lIEtBU0FOX1ZNQUxM
T0NfSU5WQUxJRCAgIDB4RjkgIC8qIHVuYWxsb2NhdGVkIHNwYWNlIGluIHZtYXBwZWQgcGFnZSAq
Lw0KKyNkZWZpbmUgS0FTQU5fR0xPQkFMX1JFRFpPTkUgICAgMHhGOSAgLyogcmVkem9uZSBmb3Ig
Z2xvYmFsIHZhcmlhYmxlICovDQorI2RlZmluZSBLQVNBTl9WTUFMTE9DX0lOVkFMSUQgICAweEY4
ICAvKiB1bmFsbG9jYXRlZCBzcGFjZSBpbiB2bWFwcGVkIHBhZ2UgKi8NCiANCiAvKg0KICAqIFN0
YWNrIHJlZHpvbmUgc2hhZG93IHZhbHVlcw0KQEAgLTExMCw4ICsxMTIsOSBAQCBzdHJ1Y3Qga2Fz
YW5fYWxsb2NfbWV0YSB7DQogCSAqIFRoZSBmcmVlIHN0YWNrIGlzIHN0b3JlZCBpbnRvIHN0cnVj
dCBrYXNhbl9mcmVlX21ldGEuDQogCSAqLw0KIAlkZXBvdF9zdGFja19oYW5kbGVfdCBhdXhfc3Rh
Y2tbMl07DQotI2VuZGlmDQorI2Vsc2UNCiAJc3RydWN0IGthc2FuX3RyYWNrIGZyZWVfdHJhY2tb
S0FTQU5fTlJfRlJFRV9TVEFDS1NdOw0KKyNlbmRpZg0KICNpZmRlZiBDT05GSUdfS0FTQU5fU1df
VEFHU19JREVOVElGWQ0KIAl1OCBmcmVlX3BvaW50ZXJfdGFnW0tBU0FOX05SX0ZSRUVfU1RBQ0tT
XTsNCiAJdTggZnJlZV90cmFja19pZHg7DQpAQCAtMTI2LDYgKzEyOSw5IEBAIHN0cnVjdCBrYXNh
bl9mcmVlX21ldGEgew0KIAkgKiBPdGhlcndpc2UgaXQgbWlnaHQgYmUgdXNlZCBmb3IgdGhlIGFs
bG9jYXRvciBmcmVlbGlzdC4NCiAJICovDQogCXN0cnVjdCBxbGlzdF9ub2RlIHF1YXJhbnRpbmVf
bGluazsNCisjaWZkZWYgQ09ORklHX0tBU0FOX0dFTkVSSUMNCisJc3RydWN0IGthc2FuX3RyYWNr
IGZyZWVfdHJhY2s7DQorI2VuZGlmDQogfTsNCiANCiBzdHJ1Y3Qga2FzYW5fYWxsb2NfbWV0YSAq
Z2V0X2FsbG9jX2luZm8oc3RydWN0IGttZW1fY2FjaGUgKmNhY2hlLA0KQEAgLTE2Nyw2ICsxNzMs
MTAgQEAgdm9pZCBrYXNhbl9yZXBvcnRfaW52YWxpZF9mcmVlKHZvaWQgKm9iamVjdCwgdW5zaWdu
ZWQgbG9uZyBpcCk7DQogc3RydWN0IHBhZ2UgKmthc2FuX2FkZHJfdG9fcGFnZShjb25zdCB2b2lk
ICphZGRyKTsNCiANCiBkZXBvdF9zdGFja19oYW5kbGVfdCBrYXNhbl9zYXZlX3N0YWNrKGdmcF90
IGZsYWdzKTsNCit2b2lkIGthc2FuX3NldF90cmFjayhzdHJ1Y3Qga2FzYW5fdHJhY2sgKnRyYWNr
LCBnZnBfdCBmbGFncyk7DQordm9pZCBrYXNhbl9zZXRfZnJlZV9pbmZvKHN0cnVjdCBrbWVtX2Nh
Y2hlICpjYWNoZSwgdm9pZCAqb2JqZWN0LCB1OCB0YWcpOw0KK3N0cnVjdCBrYXNhbl90cmFjayAq
a2FzYW5fZ2V0X2ZyZWVfdHJhY2soc3RydWN0IGttZW1fY2FjaGUgKmNhY2hlLA0KKwkJCQl2b2lk
ICpvYmplY3QsIHU4IHRhZyk7DQogDQogI2lmIGRlZmluZWQoQ09ORklHX0tBU0FOX0dFTkVSSUMp
ICYmIFwNCiAJKGRlZmluZWQoQ09ORklHX1NMQUIpIHx8IGRlZmluZWQoQ09ORklHX1NMVUIpKQ0K
ZGlmZiAtLWdpdCBhL21tL2thc2FuL3F1YXJhbnRpbmUuYyBiL21tL2thc2FuL3F1YXJhbnRpbmUu
Yw0KaW5kZXggOTc4YmM0YTNlYjUxLi40YzUzNzU4MTA0NDkgMTAwNjQ0DQotLS0gYS9tbS9rYXNh
bi9xdWFyYW50aW5lLmMNCisrKyBiL21tL2thc2FuL3F1YXJhbnRpbmUuYw0KQEAgLTE0NSw2ICsx
NDUsNyBAQCBzdGF0aWMgdm9pZCBxbGlua19mcmVlKHN0cnVjdCBxbGlzdF9ub2RlICpxbGluaywg
c3RydWN0IGttZW1fY2FjaGUgKmNhY2hlKQ0KIAlpZiAoSVNfRU5BQkxFRChDT05GSUdfU0xBQikp
DQogCQlsb2NhbF9pcnFfc2F2ZShmbGFncyk7DQogDQorCSoodTggKilrYXNhbl9tZW1fdG9fc2hh
ZG93KG9iamVjdCkgPSBLQVNBTl9LTUFMTE9DX0ZSRUU7DQogCV9fX2NhY2hlX2ZyZWUoY2FjaGUs
IG9iamVjdCwgX1RISVNfSVBfKTsNCiANCiAJaWYgKElTX0VOQUJMRUQoQ09ORklHX1NMQUIpKQ0K
ZGlmZiAtLWdpdCBhL21tL2thc2FuL3JlcG9ydC5jIGIvbW0va2FzYW4vcmVwb3J0LmMNCmluZGV4
IDI0MjFhNGJkOTIyNy4uZmVkM2M4ZmRmZDI1IDEwMDY0NA0KLS0tIGEvbW0va2FzYW4vcmVwb3J0
LmMNCisrKyBiL21tL2thc2FuL3JlcG9ydC5jDQpAQCAtMTY0LDI2ICsxNjQsNiBAQCBzdGF0aWMg
dm9pZCBkZXNjcmliZV9vYmplY3RfYWRkcihzdHJ1Y3Qga21lbV9jYWNoZSAqY2FjaGUsIHZvaWQg
Km9iamVjdCwNCiAJCSh2b2lkICopKG9iamVjdF9hZGRyICsgY2FjaGUtPm9iamVjdF9zaXplKSk7
DQogfQ0KIA0KLXN0YXRpYyBzdHJ1Y3Qga2FzYW5fdHJhY2sgKmthc2FuX2dldF9mcmVlX3RyYWNr
KHN0cnVjdCBrbWVtX2NhY2hlICpjYWNoZSwNCi0JCXZvaWQgKm9iamVjdCwgdTggdGFnKQ0KLXsN
Ci0Jc3RydWN0IGthc2FuX2FsbG9jX21ldGEgKmFsbG9jX21ldGE7DQotCWludCBpID0gMDsNCi0N
Ci0JYWxsb2NfbWV0YSA9IGdldF9hbGxvY19pbmZvKGNhY2hlLCBvYmplY3QpOw0KLQ0KLSNpZmRl
ZiBDT05GSUdfS0FTQU5fU1dfVEFHU19JREVOVElGWQ0KLQlmb3IgKGkgPSAwOyBpIDwgS0FTQU5f
TlJfRlJFRV9TVEFDS1M7IGkrKykgew0KLQkJaWYgKGFsbG9jX21ldGEtPmZyZWVfcG9pbnRlcl90
YWdbaV0gPT0gdGFnKQ0KLQkJCWJyZWFrOw0KLQl9DQotCWlmIChpID09IEtBU0FOX05SX0ZSRUVf
U1RBQ0tTKQ0KLQkJaSA9IGFsbG9jX21ldGEtPmZyZWVfdHJhY2tfaWR4Ow0KLSNlbmRpZg0KLQ0K
LQlyZXR1cm4gJmFsbG9jX21ldGEtPmZyZWVfdHJhY2tbaV07DQotfQ0KLQ0KIHN0YXRpYyB2b2lk
IGRlc2NyaWJlX29iamVjdChzdHJ1Y3Qga21lbV9jYWNoZSAqY2FjaGUsIHZvaWQgKm9iamVjdCwN
CiAJCQkJY29uc3Qgdm9pZCAqYWRkciwgdTggdGFnKQ0KIHsNCkBAIC0xOTUsOCArMTc1LDEwIEBA
IHN0YXRpYyB2b2lkIGRlc2NyaWJlX29iamVjdChzdHJ1Y3Qga21lbV9jYWNoZSAqY2FjaGUsIHZv
aWQgKm9iamVjdCwNCiAJCXByaW50X3RyYWNrKCZhbGxvY19pbmZvLT5hbGxvY190cmFjaywgIkFs
bG9jYXRlZCIpOw0KIAkJcHJfZXJyKCJcbiIpOw0KIAkJZnJlZV90cmFjayA9IGthc2FuX2dldF9m
cmVlX3RyYWNrKGNhY2hlLCBvYmplY3QsIHRhZyk7DQotCQlwcmludF90cmFjayhmcmVlX3RyYWNr
LCAiRnJlZWQiKTsNCi0JCXByX2VycigiXG4iKTsNCisJCWlmIChmcmVlX3RyYWNrKSB7DQorCQkJ
cHJpbnRfdHJhY2soZnJlZV90cmFjaywgIkZyZWVkIik7DQorCQkJcHJfZXJyKCJcbiIpOw0KKwkJ
fQ0KIA0KICNpZmRlZiBDT05GSUdfS0FTQU5fR0VORVJJQw0KIAkJaWYgKGFsbG9jX2luZm8tPmF1
eF9zdGFja1swXSkgew0KZGlmZiAtLWdpdCBhL21tL2thc2FuL3RhZ3MuYyBiL21tL2thc2FuL3Rh
Z3MuYw0KaW5kZXggMjViNzczNGU3MDEzLi4yMDFkZWU1ZDZhZTAgMTAwNjQ0DQotLS0gYS9tbS9r
YXNhbi90YWdzLmMNCisrKyBiL21tL2thc2FuL3RhZ3MuYw0KQEAgLTE2MiwzICsxNjIsNDAgQEAg
dm9pZCBfX2h3YXNhbl90YWdfbWVtb3J5KHVuc2lnbmVkIGxvbmcgYWRkciwgdTggdGFnLCB1bnNp
Z25lZCBsb25nIHNpemUpDQogCWthc2FuX3BvaXNvbl9zaGFkb3coKHZvaWQgKilhZGRyLCBzaXpl
LCB0YWcpOw0KIH0NCiBFWFBPUlRfU1lNQk9MKF9faHdhc2FuX3RhZ19tZW1vcnkpOw0KKw0KK3Zv
aWQga2FzYW5fc2V0X2ZyZWVfaW5mbyhzdHJ1Y3Qga21lbV9jYWNoZSAqY2FjaGUsDQorCQkJCXZv
aWQgKm9iamVjdCwgdTggdGFnKQ0KK3sNCisJc3RydWN0IGthc2FuX2FsbG9jX21ldGEgKmFsbG9j
X21ldGE7DQorCXU4IGlkeCA9IDA7DQorDQorCWFsbG9jX21ldGEgPSBnZXRfYWxsb2NfaW5mbyhj
YWNoZSwgb2JqZWN0KTsNCisNCisjaWZkZWYgQ09ORklHX0tBU0FOX1NXX1RBR1NfSURFTlRJRlkN
CisJaWR4ID0gYWxsb2NfbWV0YS0+ZnJlZV90cmFja19pZHg7DQorCWFsbG9jX21ldGEtPmZyZWVf
cG9pbnRlcl90YWdbaWR4XSA9IHRhZzsNCisJYWxsb2NfbWV0YS0+ZnJlZV90cmFja19pZHggPSAo
aWR4ICsgMSkgJSBLQVNBTl9OUl9GUkVFX1NUQUNLUzsNCisjZW5kaWYNCisNCisJa2FzYW5fc2V0
X3RyYWNrKCZhbGxvY19tZXRhLT5mcmVlX3RyYWNrW2lkeF0sIEdGUF9OT1dBSVQpOw0KK30NCisN
CitzdHJ1Y3Qga2FzYW5fdHJhY2sgKmthc2FuX2dldF9mcmVlX3RyYWNrKHN0cnVjdCBrbWVtX2Nh
Y2hlICpjYWNoZSwNCisJCQkJdm9pZCAqb2JqZWN0LCB1OCB0YWcpDQorew0KKwlzdHJ1Y3Qga2Fz
YW5fYWxsb2NfbWV0YSAqYWxsb2NfbWV0YTsNCisJaW50IGkgPSAwOw0KKw0KKwlhbGxvY19tZXRh
ID0gZ2V0X2FsbG9jX2luZm8oY2FjaGUsIG9iamVjdCk7DQorDQorI2lmZGVmIENPTkZJR19LQVNB
Tl9TV19UQUdTX0lERU5USUZZDQorCWZvciAoaSA9IDA7IGkgPCBLQVNBTl9OUl9GUkVFX1NUQUNL
UzsgaSsrKSB7DQorCQlpZiAoYWxsb2NfbWV0YS0+ZnJlZV9wb2ludGVyX3RhZ1tpXSA9PSB0YWcp
DQorCQkJYnJlYWs7DQorCX0NCisJaWYgKGkgPT0gS0FTQU5fTlJfRlJFRV9TVEFDS1MpDQorCQlp
ID0gYWxsb2NfbWV0YS0+ZnJlZV90cmFja19pZHg7DQorI2VuZGlmDQorDQorCXJldHVybiAmYWxs
b2NfbWV0YS0+ZnJlZV90cmFja1tpXTsNCit9DQotLSANCjIuMTguMA0K

